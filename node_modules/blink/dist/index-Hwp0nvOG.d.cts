import { AsyncIterableStream, InferUIMessageChunk, UIMessage } from "ai";

//#region src/api/chat.d.ts
interface Chat {
  readonly id: string;
}
interface CreateChatOptions {
  readonly messages: ReadonlyArray<UIMessage>;
  readonly labels?: ReadonlyArray<string>;
  readonly title?: string;
}
interface MessageOptions {
  readonly behavior?: "interrupt" | "queue";
}
declare const chat: Readonly<{
  find(labels: ReadonlyArray<string>): Promise<Chat | undefined>;
  create(options: CreateChatOptions): Promise<Chat>;
  message(chat: string, message: UIMessage, options?: MessageOptions): Promise<void>;
}>;
//#endregion
//#region src/api/index.d.ts
/**
 * SendMessagesResponse is the response of the sendMessages function.
 * It can be a stream of messages or an arbitrary response.
 */
type SendMessagesResponse = {
  toUIMessageStream(): AsyncIterableStream<InferUIMessageChunk<UIMessage>>;
} | Response | ReadableStream<InferUIMessageChunk<UIMessage>>;
/**
 * SendMessagesOptions is the options for the sendMessages function.
 */
interface SendMessagesOptions {
  readonly messages: UIMessage[];
  readonly abortSignal?: AbortSignal;
}
interface Agent {
  sendMessages(options: SendMessagesOptions): Promise<SendMessagesResponse> | SendMessagesResponse;
  webhook?(request: Request): Promise<Response | void>;
}
/**
 * AgentDefaultExport is the expected default export of a compiled agent.
 * All routing logic is handled by the agent function.
 *
 * This maximizes flexibility over the agent's behavior -
 * allowing users to add arbitrary routing logic to the agent.
 */
type AgentDefaultExport = {
  readonly version: "v0";
  fetch: (request: Request) => Promise<Response> | Response;
};
/**
 * agent is the main function to create a Blink agent.
 *
 * @param agent
 * @returns
 */
declare function agent(agent: Agent): AgentDefaultExport;
interface SendMessagesRequest {
  readonly messages: UIMessage[];
}
declare const StreamResponseFormatHeader = "x-blink-stream-response-format";
type StreamResponseFormat = "ui-message" | "openai-chat" | "openai-response" | "anthropic" | "google" | "xai";
declare function withResponseFormat(response: Response, format: StreamResponseFormat): Response;
//#endregion
export { Agent, AgentDefaultExport, Chat, CreateChatOptions, MessageOptions, SendMessagesOptions, SendMessagesRequest, SendMessagesResponse, StreamResponseFormat, StreamResponseFormatHeader, agent, chat, withResponseFormat };