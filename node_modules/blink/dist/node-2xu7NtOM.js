import{createRequire as e}from"node:module";var t=Object.create,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=(e,t)=>()=>(e&&(t=e(e=0)),t),c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),l=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},u=(e,t,a,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(var c=i(t),l=0,u=c.length,d;l<u;l++)d=c[l],!o.call(e,d)&&d!==a&&n(e,d,{get:(e=>t[e]).bind(null,d),enumerable:!(s=r(t,d))||s.enumerable});return e},d=(e,r,i)=>(i=e==null?{}:t(a(e)),u(r||!e||!e.__esModule?n(i,`default`,{value:e,enumerable:!0}):i,e)),f=e=>u(n({},`__esModule`,{value:!0}),e),p=e(import.meta.url);const m=Symbol.for(`@whatwg-node/promise-helpers/FakePromise`);function h(e){return e?.then!=null}function g(e){let t=e;return t&&t.then&&t.catch&&t.finally}function _(e,t,n,r){let i=v().then(e).then(t,n);return r&&(i=i.finally(r)),T(i)}function v(e){return e&&g(e)?e:h(e)?{then:(t,n)=>v(e.then(t,n)),catch:t=>v(e.then(e=>e,t)),finally:t=>v(t?w(e,t):e),[Symbol.toStringTag]:`Promise`}:{then(t){if(t)try{return v(t(e))}catch(e){return x(e)}return this},catch(){return this},finally(t){if(t)try{return v(t()).then(()=>e,()=>e)}catch(e){return x(e)}return this},[Symbol.toStringTag]:`Promise`,__fakePromiseValue:e,[m]:`resolved`}}function y(){if(Promise.withResolvers)return Promise.withResolvers();let e,t,n=new Promise(function(n,r){e=n,t=r});return{promise:n,get resolve(){return e},get reject(){return t}}}function b(e,t,n){if(e?.length===0)return;let r=e[Symbol.iterator](),i=0;function a(){let{done:e,value:o}=r.next();if(e)return;let s=!1;function c(){s=!0}return _(function(){return t(o,c,i++)},function(e){if(e&&n?.push(e),!s)return a()})}return a()}function x(e){return{then(t,n){if(n)try{return v(n(e))}catch(e){return x(e)}return this},catch(t){if(t)try{return v(t(e))}catch(e){return x(e)}return this},finally(e){if(e)try{e()}catch(e){return x(e)}return this},__fakeRejectError:e,[Symbol.toStringTag]:`Promise`,[m]:`rejected`}}function S(e){return e?.[m]===`resolved`}function C(e){return e?.[m]===`rejected`}function w(e,t){return`finally`in e?e.finally(t):e.then(e=>{let n=t();return h(n)?n.then(()=>e):e},e=>{let n=t();if(h(n))return n.then(()=>{throw e});throw e})}function T(e){if(S(e))return e.__fakePromiseValue;if(C(e))throw e.__fakeRejectError;return e}function E(e,t){let n={...t,...e};for(let r of Object.keys(n))r in e&&r in t&&(n[r]=(n,i)=>e[r](n,()=>t[r](n,i)));return n}const D=e=>({fn(t,n){return t?(...r)=>{let i;return t(e,()=>{i=n(...r)}),i}:n},asyncFn(t,n){return t?(...r)=>{let i;return _(()=>t(e,()=>(i=n(...r),h(i)?i.then(()=>void 0):void 0)),()=>i)}:n}});var O=class extends Error{error;suppressed;constructor(e,t,n){super(n),this.error=e,this.suppressed=t,this.name=`SuppressedError`,Error.captureStackTrace(this,this.constructor)}};const k={get dispose(){return Symbol.dispose||Symbol.for(`dispose`)},get asyncDispose(){return Symbol.asyncDispose||Symbol.for(`asyncDispose`)}};function A(e){return e?.[k.dispose]!=null}function j(e){return e?.[k.asyncDispose]!=null}const M=globalThis.SuppressedError||O;var N=class e{callbacks=[];get disposed(){return this.callbacks.length===0}use(e){return j(e)?this.callbacks.push(()=>e[k.asyncDispose]()):A(e)&&this.callbacks.push(()=>e[k.dispose]()),e}adopt(e,t){return t&&this.callbacks.push(()=>t(e)),e}defer(e){e&&this.callbacks.push(e)}move(){let t=new e;return t.callbacks=this.callbacks,this.callbacks=[],t}disposeAsync(){return this[k.asyncDispose]()}_error;_iterateCallbacks(){let e=this.callbacks.pop();if(e)return _(e,()=>this._iterateCallbacks(),e=>(this._error=this._error?new M(e,this._error):e,this._iterateCallbacks()))}[k.asyncDispose](){let e=this._iterateCallbacks();if(e?.then)return e.then(()=>{if(this._error){let e=this._error;throw this._error=void 0,e}});if(this._error){let e=this._error;throw this._error=void 0,e}}[Symbol.toStringTag]=`AsyncDisposableStack`};globalThis.SuppressedError,k.dispose,Symbol.toStringTag,globalThis.DisposableStack;const P=globalThis.AsyncDisposableStack||N;globalThis.SuppressedError;var F=c(((exports,t)=>{function n(){return Object.keys(globalThis).some(e=>e.startsWith(`__NEXT`))}t.exports=function(){return!!(globalThis.Deno||globalThis.Bun||n())}})),I=c(((exports,t)=>{var n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o=(e,t)=>n(e,`name`,{value:t,configurable:!0}),s=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},c=(e,t,o,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let c of i(t))!a.call(e,c)&&c!==o&&n(e,c,{get:()=>t[c],enumerable:!(s=r(t,c))||s.enumerable});return e},l=e=>c(n({},`__esModule`,{value:!0}),e),u={};s(u,{URLPattern:()=>de}),t.exports=l(u);var d=class{type=3;name=``;prefix=``;value=``;suffix=``;modifier=3;constructor(e,t,n,r,i,a){this.type=e,this.name=t,this.prefix=n,this.value=r,this.suffix=i,this.modifier=a}hasCustomName(){return this.name!==``&&typeof this.name!=`number`}};o(d,`Part`);var f=/[$_\p{ID_Start}]/u,p=/[$_\u200C\u200D\p{ID_Continue}]/u,m=`.*`;function h(e,t){return(t?/^[\x00-\xFF]*$/:/^[\x00-\x7F]*$/).test(e)}o(h,`isASCII`);function g(e,t=!1){let n=[],r=0;for(;r<e.length;){let i=e[r],a=o(function(i){if(!t)throw TypeError(i);n.push({type:`INVALID_CHAR`,index:r,value:e[r++]})},`ErrorOrInvalid`);if(i===`*`){n.push({type:`ASTERISK`,index:r,value:e[r++]});continue}if(i===`+`||i===`?`){n.push({type:`OTHER_MODIFIER`,index:r,value:e[r++]});continue}if(i===`\\`){n.push({type:`ESCAPED_CHAR`,index:r++,value:e[r++]});continue}if(i===`{`){n.push({type:`OPEN`,index:r,value:e[r++]});continue}if(i===`}`){n.push({type:`CLOSE`,index:r,value:e[r++]});continue}if(i===`:`){let t=``,i=r+1;for(;i<e.length;){let n=e.substr(i,1);if(i===r+1&&f.test(n)||i!==r+1&&p.test(n)){t+=e[i++];continue}break}if(!t){a(`Missing parameter name at ${r}`);continue}n.push({type:`NAME`,index:r,value:t}),r=i;continue}if(i===`(`){let t=1,i=``,o=r+1,s=!1;if(e[o]===`?`){a(`Pattern cannot start with "?" at ${o}`);continue}for(;o<e.length;){if(!h(e[o],!1)){a(`Invalid character '${e[o]}' at ${o}.`),s=!0;break}if(e[o]===`\\`){i+=e[o++]+e[o++];continue}if(e[o]===`)`){if(t--,t===0){o++;break}}else if(e[o]===`(`&&(t++,e[o+1]!==`?`)){a(`Capturing groups are not allowed at ${o}`),s=!0;break}i+=e[o++]}if(s)continue;if(t){a(`Unbalanced pattern at ${r}`);continue}if(!i){a(`Missing pattern at ${r}`);continue}n.push({type:`REGEX`,index:r,value:i}),r=o;continue}n.push({type:`CHAR`,index:r,value:e[r++]})}return n.push({type:`END`,index:r,value:``}),n}o(g,`lexer`);function _(e,t={}){let n=g(e);t.delimiter??=`/#?`,t.prefixes??=`./`;let r=`[^${v(t.delimiter)}]+?`,i=[],a=0,s=0,c=new Set,l=o(e=>{if(s<n.length&&n[s].type===e)return n[s++].value},`tryConsume`),u=o(()=>l(`OTHER_MODIFIER`)??l(`ASTERISK`),`tryConsumeModifier`),f=o(e=>{let t=l(e);if(t!==void 0)return t;let{type:r,index:i}=n[s];throw TypeError(`Unexpected ${r} at ${i}, expected ${e}`)},`mustConsume`),p=o(()=>{let e=``,t;for(;t=l(`CHAR`)??l(`ESCAPED_CHAR`);)e+=t;return e},`consumeText`),h=o(e=>e,`DefaultEncodePart`),_=t.encodePart||h,y=``,b=o(e=>{y+=e},`appendToPendingFixedValue`),x=o(()=>{y.length&&(i.push(new d(3,``,``,_(y),``,3)),y=``)},`maybeAddPartFromPendingFixedValue`),S=o((e,t,n,o,s)=>{let l=3;switch(s){case`?`:l=1;break;case`*`:l=0;break;case`+`:l=2;break}if(!t&&!n&&l===3){b(e);return}if(x(),!t&&!n){if(!e)return;i.push(new d(3,``,``,_(e),``,l));return}let u;u=n?n===`*`?m:n:r;let f=2;u===r?(f=1,u=``):u===m&&(f=0,u=``);let p;if(t?p=t:n&&(p=a++),c.has(p))throw TypeError(`Duplicate name '${p}'.`);c.add(p),i.push(new d(f,p,_(e),u,_(o),l))},`addPart`);for(;s<n.length;){let e=l(`CHAR`),n=l(`NAME`),r=l(`REGEX`);if(!n&&!r&&(r=l(`ASTERISK`)),n||r){let i=e??``;t.prefixes.indexOf(i)===-1&&(b(i),i=``),x();let a=u();S(i,n,r,``,a);continue}let i=e??l(`ESCAPED_CHAR`);if(i){b(i);continue}if(l(`OPEN`)){let e=p(),t=l(`NAME`),n=l(`REGEX`);!t&&!n&&(n=l(`ASTERISK`));let r=p();f(`CLOSE`);let i=u();S(e,t,n,r,i);continue}x(),f(`END`)}return i}o(_,`parse`);function v(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,`\\$1`)}o(v,`escapeString`);function y(e){return e&&e.ignoreCase?`ui`:`u`}o(y,`flags`);function b(e,t,n){return S(_(e,n),t,n)}o(b,`stringToRegexp`);function x(e){switch(e){case 0:return`*`;case 1:return`?`;case 2:return`+`;case 3:return``}}o(x,`modifierToString`);function S(e,t,n={}){n.delimiter??=`/#?`,n.prefixes??=`./`,n.sensitive??=!1,n.strict??=!1,n.end??=!0,n.start??=!0,n.endsWith=``;let r=n.start?`^`:``;for(let i of e){if(i.type===3){i.modifier===3?r+=v(i.value):r+=`(?:${v(i.value)})${x(i.modifier)}`;continue}t&&t.push(i.name);let e=`[^${v(n.delimiter)}]+?`,a=i.value;if(i.type===1?a=e:i.type===0&&(a=m),!i.prefix.length&&!i.suffix.length){i.modifier===3||i.modifier===1?r+=`(${a})${x(i.modifier)}`:r+=`((?:${a})${x(i.modifier)})`;continue}if(i.modifier===3||i.modifier===1){r+=`(?:${v(i.prefix)}(${a})${v(i.suffix)})`,r+=x(i.modifier);continue}r+=`(?:${v(i.prefix)}`,r+=`((?:${a})(?:`,r+=v(i.suffix),r+=v(i.prefix),r+=`(?:${a}))*)${v(i.suffix)})`,i.modifier===0&&(r+=`?`)}let i=`[${v(n.endsWith)}]|$`,a=`[${v(n.delimiter)}]`;if(n.end)return n.strict||(r+=`${a}?`),n.endsWith.length?r+=`(?=${i})`:r+=`$`,new RegExp(r,y(n));n.strict||(r+=`(?:${a}(?=${i}))?`);let o=!1;if(e.length){let t=e[e.length-1];t.type===3&&t.modifier===3&&(o=n.delimiter.indexOf(t)>-1)}return o||(r+=`(?=${a}|${i})`),new RegExp(r,y(n))}o(S,`partsToRegexp`);var C={delimiter:``,prefixes:``,sensitive:!0,strict:!0},w={delimiter:`.`,prefixes:``,sensitive:!0,strict:!0},T={delimiter:`/`,prefixes:`/`,sensitive:!0,strict:!0};function E(e,t){return e.length?e[0]===`/`?!0:!t||e.length<2?!1:(e[0]==`\\`||e[0]==`{`)&&e[1]==`/`:!1}o(E,`isAbsolutePathname`);function D(e,t){return e.startsWith(t)?e.substring(t.length,e.length):e}o(D,`maybeStripPrefix`);function O(e,t){return e.endsWith(t)?e.substr(0,e.length-t.length):e}o(O,`maybeStripSuffix`);function k(e){return!e||e.length<2?!1:e[0]===`[`||(e[0]===`\\`||e[0]===`{`)&&e[1]===`[`}o(k,`treatAsIPv6Hostname`);var A=[`ftp`,`file`,`http`,`https`,`ws`,`wss`];function j(e){if(!e)return!0;for(let t of A)if(e.test(t))return!0;return!1}o(j,`isSpecialScheme`);function M(e,t){if(e=D(e,`#`),t||e===``)return e;let n=new URL(`https://example.com`);return n.hash=e,n.hash?n.hash.substring(1,n.hash.length):``}o(M,`canonicalizeHash`);function N(e,t){if(e=D(e,`?`),t||e===``)return e;let n=new URL(`https://example.com`);return n.search=e,n.search?n.search.substring(1,n.search.length):``}o(N,`canonicalizeSearch`);function P(e,t){return t||e===``?e:k(e)?V(e):B(e)}o(P,`canonicalizeHostname`);function F(e,t){if(t||e===``)return e;let n=new URL(`https://example.com`);return n.password=e,n.password}o(F,`canonicalizePassword`);function I(e,t){if(t||e===``)return e;let n=new URL(`https://example.com`);return n.username=e,n.username}o(I,`canonicalizeUsername`);function L(e,t,n){if(n||e===``)return e;if(t&&!A.includes(t))return new URL(`${t}:${e}`).pathname;let r=e[0]==`/`;return e=new URL(r?e:`/-`+e,`https://example.com`).pathname,r||(e=e.substring(2,e.length)),e}o(L,`canonicalizePathname`);function R(e,t,n){return te(t)===e&&(e=``),n||e===``?e:ie(e)}o(R,`canonicalizePort`);function ee(e,t){return e=O(e,`:`),t||e===``?e:z(e)}o(ee,`canonicalizeProtocol`);function te(e){switch(e){case`ws`:case`http`:return`80`;case`wws`:case`https`:return`443`;case`ftp`:return`21`;default:return``}}o(te,`defaultPortForProtocol`);function z(e){if(e===``)return e;if(/^[-+.A-Za-z0-9]*$/.test(e))return e.toLowerCase();throw TypeError(`Invalid protocol '${e}'.`)}o(z,`protocolEncodeCallback`);function ne(e){if(e===``)return e;let t=new URL(`https://example.com`);return t.username=e,t.username}o(ne,`usernameEncodeCallback`);function re(e){if(e===``)return e;let t=new URL(`https://example.com`);return t.password=e,t.password}o(re,`passwordEncodeCallback`);function B(e){if(e===``)return e;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(e))throw TypeError(`Invalid hostname '${e}'`);let t=new URL(`https://example.com`);return t.hostname=e,t.hostname}o(B,`hostnameEncodeCallback`);function V(e){if(e===``)return e;if(/[^0-9a-fA-F[\]:]/g.test(e))throw TypeError(`Invalid IPv6 hostname '${e}'`);return e.toLowerCase()}o(V,`ipv6HostnameEncodeCallback`);function ie(e){if(e===``||/^[0-9]*$/.test(e)&&parseInt(e)<=65535)return e;throw TypeError(`Invalid port '${e}'.`)}o(ie,`portEncodeCallback`);function ae(e){if(e===``)return e;let t=new URL(`https://example.com`);return t.pathname=e[0]===`/`?e:`/-`+e,e[0]===`/`?t.pathname:t.pathname.substring(2,t.pathname.length)}o(ae,`standardURLPathnameEncodeCallback`);function oe(e){return e===``?e:new URL(`data:${e}`).pathname}o(oe,`pathURLPathnameEncodeCallback`);function se(e){if(e===``)return e;let t=new URL(`https://example.com`);return t.search=e,t.search.substring(1,t.search.length)}o(se,`searchEncodeCallback`);function ce(e){if(e===``)return e;let t=new URL(`https://example.com`);return t.hash=e,t.hash.substring(1,t.hash.length)}o(ce,`hashEncodeCallback`);var H=class{#i;#n=[];#t={};#e=0;#s=1;#l=0;#o=0;#d=0;#p=0;#g=!1;constructor(e){this.#i=e}get result(){return this.#t}parse(){for(this.#n=g(this.#i,!0);this.#e<this.#n.length;this.#e+=this.#s){if(this.#s=1,this.#n[this.#e].type===`END`){if(this.#o===0){this.#b(),this.#f()?this.#r(9,1):this.#h()?this.#r(8,1):this.#r(7,0);continue}else if(this.#o===2){this.#u(5);continue}this.#r(10,0);break}if(this.#d>0)if(this.#A())--this.#d;else continue;if(this.#T()){this.#d+=1;continue}switch(this.#o){case 0:this.#P()&&this.#u(1);break;case 1:if(this.#P()){this.#C();let e=7,t=1;this.#E()?(e=2,t=3):this.#g&&(e=2),this.#r(e,t)}break;case 2:this.#S()?this.#u(3):(this.#x()||this.#h()||this.#f())&&this.#u(5);break;case 3:this.#O()?this.#r(4,1):this.#S()&&this.#r(5,1);break;case 4:this.#S()&&this.#r(5,1);break;case 5:this.#y()?this.#p+=1:this.#w()&&--this.#p,this.#k()&&!this.#p?this.#r(6,1):this.#x()?this.#r(7,0):this.#h()?this.#r(8,1):this.#f()&&this.#r(9,1);break;case 6:this.#x()?this.#r(7,0):this.#h()?this.#r(8,1):this.#f()&&this.#r(9,1);break;case 7:this.#h()?this.#r(8,1):this.#f()&&this.#r(9,1);break;case 8:this.#f()&&this.#r(9,1);break;case 9:break;case 10:break}}this.#t.hostname!==void 0&&this.#t.port===void 0&&(this.#t.port=``)}#r(e,t){switch(this.#o){case 0:break;case 1:this.#t.protocol=this.#c();break;case 2:break;case 3:this.#t.username=this.#c();break;case 4:this.#t.password=this.#c();break;case 5:this.#t.hostname=this.#c();break;case 6:this.#t.port=this.#c();break;case 7:this.#t.pathname=this.#c();break;case 8:this.#t.search=this.#c();break;case 9:this.#t.hash=this.#c();break;case 10:break}this.#o!==0&&e!==10&&([1,2,3,4].includes(this.#o)&&[6,7,8,9].includes(e)&&(this.#t.hostname??=``),[1,2,3,4,5,6].includes(this.#o)&&[8,9].includes(e)&&(this.#t.pathname??=this.#g?`/`:``),[1,2,3,4,5,6,7].includes(this.#o)&&e===9&&(this.#t.search??=``)),this.#R(e,t)}#R(e,t){this.#o=e,this.#l=this.#e+t,this.#e+=t,this.#s=0}#b(){this.#e=this.#l,this.#s=0}#u(e){this.#b(),this.#o=e}#m(e){return e<0&&(e=this.#n.length-e),e<this.#n.length?this.#n[e]:this.#n[this.#n.length-1]}#a(e,t){let n=this.#m(e);return n.value===t&&(n.type===`CHAR`||n.type===`ESCAPED_CHAR`||n.type===`INVALID_CHAR`)}#P(){return this.#a(this.#e,`:`)}#E(){return this.#a(this.#e+1,`/`)&&this.#a(this.#e+2,`/`)}#S(){return this.#a(this.#e,`@`)}#O(){return this.#a(this.#e,`:`)}#k(){return this.#a(this.#e,`:`)}#x(){return this.#a(this.#e,`/`)}#h(){if(this.#a(this.#e,`?`))return!0;if(this.#n[this.#e].value!==`?`)return!1;let e=this.#m(this.#e-1);return e.type!==`NAME`&&e.type!==`REGEX`&&e.type!==`CLOSE`&&e.type!==`ASTERISK`}#f(){return this.#a(this.#e,`#`)}#T(){return this.#n[this.#e].type==`OPEN`}#A(){return this.#n[this.#e].type==`CLOSE`}#y(){return this.#a(this.#e,`[`)}#w(){return this.#a(this.#e,`]`)}#c(){let e=this.#n[this.#e],t=this.#m(this.#l).index;return this.#i.substring(t,e.index)}#C(){let e={};Object.assign(e,C),e.encodePart=z;let t=b(this.#c(),void 0,e);this.#g=j(t)}};o(H,`Parser`);var U=[`protocol`,`username`,`password`,`hostname`,`port`,`pathname`,`search`,`hash`],W=`*`;function G(e,t){if(typeof e!=`string`)throw TypeError(`parameter 1 is not of type 'string'.`);let n=new URL(e,t);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search===``?void 0:n.search.substring(1,n.search.length),hash:n.hash===``?void 0:n.hash.substring(1,n.hash.length)}}o(G,`extractValues`);function K(e,t){return t?J(e):e}o(K,`processBaseURLString`);function q(e,t,n){let r;if(typeof t.baseURL==`string`)try{r=new URL(t.baseURL),t.protocol===void 0&&(e.protocol=K(r.protocol.substring(0,r.protocol.length-1),n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&(e.username=K(r.username,n)),!n&&t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.username===void 0&&t.password===void 0&&(e.password=K(r.password,n)),t.protocol===void 0&&t.hostname===void 0&&(e.hostname=K(r.hostname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&(e.port=K(r.port,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&(e.pathname=K(r.pathname,n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&(e.search=K(r.search.substring(1,r.search.length),n)),t.protocol===void 0&&t.hostname===void 0&&t.port===void 0&&t.pathname===void 0&&t.search===void 0&&t.hash===void 0&&(e.hash=K(r.hash.substring(1,r.hash.length),n))}catch{throw TypeError(`invalid baseURL '${t.baseURL}'.`)}if(typeof t.protocol==`string`&&(e.protocol=ee(t.protocol,n)),typeof t.username==`string`&&(e.username=I(t.username,n)),typeof t.password==`string`&&(e.password=F(t.password,n)),typeof t.hostname==`string`&&(e.hostname=P(t.hostname,n)),typeof t.port==`string`&&(e.port=R(t.port,e.protocol,n)),typeof t.pathname==`string`){if(e.pathname=t.pathname,r&&!E(e.pathname,n)){let t=r.pathname.lastIndexOf(`/`);t>=0&&(e.pathname=K(r.pathname.substring(0,t+1),n)+e.pathname)}e.pathname=L(e.pathname,e.protocol,n)}return typeof t.search==`string`&&(e.search=N(t.search,n)),typeof t.hash==`string`&&(e.hash=M(t.hash,n)),e}o(q,`applyInit`);function J(e){return e.replace(/([+*?:{}()\\])/g,`\\$1`)}o(J,`escapePatternString`);function le(e){return e.replace(/([.+*?^${}()[\]|/\\])/g,`\\$1`)}o(le,`escapeRegexpString`);function ue(e,t){t.delimiter??=`/#?`,t.prefixes??=`./`,t.sensitive??=!1,t.strict??=!1,t.end??=!0,t.start??=!0,t.endsWith=``;let n=`[^${le(t.delimiter)}]+?`,r=/[$_\u200C\u200D\p{ID_Continue}]/u,i=``;for(let a=0;a<e.length;++a){let o=e[a];if(o.type===3){if(o.modifier===3){i+=J(o.value);continue}i+=`{${J(o.value)}}${x(o.modifier)}`;continue}let s=o.hasCustomName(),c=!!o.suffix.length||!!o.prefix.length&&(o.prefix.length!==1||!t.prefixes.includes(o.prefix)),l=a>0?e[a-1]:null,u=a<e.length-1?e[a+1]:null;if(!c&&s&&o.type===1&&o.modifier===3&&u&&!u.prefix.length&&!u.suffix.length)if(u.type===3){let e=u.value.length>0?u.value[0]:``;c=r.test(e)}else c=!u.hasCustomName();if(!c&&!o.prefix.length&&l&&l.type===3){let e=l.value[l.value.length-1];c=t.prefixes.includes(e)}c&&(i+=`{`),i+=J(o.prefix),s&&(i+=`:${o.name}`),o.type===2?i+=`(${o.value})`:o.type===1?s||(i+=`(${n})`):o.type===0&&(!s&&(!l||l.type===3||l.modifier!==3||c||o.prefix!==``)?i+=`*`:i+=`(.*)`),o.type===1&&s&&o.suffix.length&&r.test(o.suffix[0])&&(i+=`\\`),i+=J(o.suffix),c&&(i+=`}`),o.modifier!==3&&(i+=x(o.modifier))}return i}o(ue,`partsToPattern`);var de=class{#i;#n={};#t={};#e={};#s={};#l=!1;constructor(e={},t,n){try{let r;if(typeof t==`string`?r=t:n=t,typeof e==`string`){let t=new H(e);if(t.parse(),e=t.result,r===void 0&&typeof e.protocol!=`string`)throw TypeError(`A base URL must be provided for a relative constructor string.`);e.baseURL=r}else{if(!e||typeof e!=`object`)throw TypeError(`parameter 1 is not of type 'string' and cannot convert to dictionary.`);if(r)throw TypeError(`parameter 1 is not of type 'string'.`)}typeof n>`u`&&(n={ignoreCase:!1});let i={ignoreCase:n.ignoreCase===!0},a={pathname:W,protocol:W,username:W,password:W,hostname:W,port:W,search:W,hash:W};this.#i=q(a,e,!0),te(this.#i.protocol)===this.#i.port&&(this.#i.port=``);let o;for(o of U){if(!(o in this.#i))continue;let e={},t=this.#i[o];switch(this.#t[o]=[],o){case`protocol`:Object.assign(e,C),e.encodePart=z;break;case`username`:Object.assign(e,C),e.encodePart=ne;break;case`password`:Object.assign(e,C),e.encodePart=re;break;case`hostname`:Object.assign(e,w),k(t)?e.encodePart=V:e.encodePart=B;break;case`port`:Object.assign(e,C),e.encodePart=ie;break;case`pathname`:j(this.#n.protocol)?(Object.assign(e,T,i),e.encodePart=ae):(Object.assign(e,C,i),e.encodePart=oe);break;case`search`:Object.assign(e,C,i),e.encodePart=se;break;case`hash`:Object.assign(e,C,i),e.encodePart=ce;break}try{this.#s[o]=_(t,e),this.#n[o]=S(this.#s[o],this.#t[o],e),this.#e[o]=ue(this.#s[o],e),this.#l=this.#l||this.#s[o].some(e=>e.type===2)}catch{throw TypeError(`invalid ${o} pattern '${this.#i[o]}'.`)}}}catch(e){throw TypeError(`Failed to construct 'URLPattern': ${e.message}`)}}get[Symbol.toStringTag](){return`URLPattern`}test(e={},t){let n={pathname:``,protocol:``,username:``,password:``,hostname:``,port:``,search:``,hash:``};if(typeof e!=`string`&&t)throw TypeError(`parameter 1 is not of type 'string'.`);if(typeof e>`u`)return!1;try{n=typeof e==`object`?q(n,e,!1):q(n,G(e,t),!1)}catch{return!1}let r;for(r of U)if(!this.#n[r].exec(n[r]))return!1;return!0}exec(e={},t){let n={pathname:``,protocol:``,username:``,password:``,hostname:``,port:``,search:``,hash:``};if(typeof e!=`string`&&t)throw TypeError(`parameter 1 is not of type 'string'.`);if(typeof e>`u`)return;try{n=typeof e==`object`?q(n,e,!1):q(n,G(e,t),!1)}catch{return null}let r={};t?r.inputs=[e,t]:r.inputs=[e];let i;for(i of U){let e=this.#n[i].exec(n[i]);if(!e)return null;let t={};for(let[n,r]of this.#t[i].entries())if(typeof r==`string`||typeof r==`number`){let i=e[n+1];t[r]=i}r[i]={input:n[i]??``,groups:t}}return r}static compareComponent(e,t,n){let r=o((e,t)=>{for(let n of[`type`,`modifier`,`prefix`,`value`,`suffix`]){if(e[n]<t[n])return-1;if(e[n]===t[n])continue;return 1}return 0},`comparePart`),i=new d(3,``,``,``,``,3),a=new d(0,``,``,``,``,3),s=o((e,t)=>{let n=0;for(;n<Math.min(e.length,t.length);++n){let i=r(e[n],t[n]);if(i)return i}return e.length===t.length?0:r(e[n]??i,t[n]??i)},`comparePartList`);return!t.#e[e]&&!n.#e[e]?0:t.#e[e]&&!n.#e[e]?s(t.#s[e],[a]):!t.#e[e]&&n.#e[e]?s([a],n.#s[e]):s(t.#s[e],n.#s[e])}get protocol(){return this.#e.protocol}get username(){return this.#e.username}get password(){return this.#e.password}get hostname(){return this.#e.hostname}get port(){return this.#e.port}get pathname(){return this.#e.pathname}get search(){return this.#e.search}get hash(){return this.#e.hash}get hasRegExpGroups(){return this.#l}};o(de,`URLPattern`)})),L=c(((exports,t)=>{let{URLPattern:n}=I();t.exports={URLPattern:n},globalThis.URLPattern||(globalThis.URLPattern=n)})),R=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.isPromise=n,exports.isActualPromise=r,exports.handleMaybePromise=i,exports.fakePromise=a,exports.createDeferredPromise=o,exports.iterateAsync=s,exports.iterateAsyncVoid=s,exports.fakeRejectPromise=c,exports.mapMaybePromise=l,exports.mapAsyncIterator=u,exports.promiseLikeFinally=m,exports.unfakePromise=h;let t=Symbol.for(`@whatwg-node/promise-helpers/FakePromise`);function n(e){return e?.then!=null}function r(e){let t=e;return t&&t.then&&t.catch&&t.finally}function i(e,t,n,r){let i=a().then(e).then(t,n);return r&&(i=i.finally(r)),h(i)}function a(e){return e&&r(e)?e:n(e)?{then:(t,n)=>a(e.then(t,n)),catch:t=>a(e.then(e=>e,t)),finally:t=>a(t?m(e,t):e),[Symbol.toStringTag]:`Promise`}:{then(t){if(t)try{return a(t(e))}catch(e){return c(e)}return this},catch(){return this},finally(t){if(t)try{return a(t()).then(()=>e,()=>e)}catch(e){return c(e)}return this},[Symbol.toStringTag]:`Promise`,__fakePromiseValue:e,[t]:`resolved`}}function o(){if(Promise.withResolvers)return Promise.withResolvers();let e,t,n=new Promise(function(n,r){e=n,t=r});return{promise:n,get resolve(){return e},get reject(){return t}}}function s(e,t,n){if(e?.length===0)return;let r=e[Symbol.iterator](),a=0;function o(){let{done:e,value:s}=r.next();if(e)return;let c=!1;function l(){c=!0}return i(function(){return t(s,l,a++)},function(e){if(e&&n?.push(e),!c)return o()})}return o()}function c(e){return{then(t,n){if(n)try{return a(n(e))}catch(e){return c(e)}return this},catch(t){if(t)try{return a(t(e))}catch(e){return c(e)}return this},finally(e){if(e)try{e()}catch(e){return c(e)}return this},__fakeRejectError:e,[Symbol.toStringTag]:`Promise`,[t]:`rejected`}}function l(e,t,n){return i(()=>e,t,n)}function u(e,t,n,r){Symbol.asyncIterator in e&&(e=e[Symbol.asyncIterator]());let o,s,l;if(r){let e;l=t=>(e||=i(r,()=>t,()=>t),e)}typeof e.return==`function`&&(o=e.return,s=t=>{let n=()=>{throw t};return o.call(e).then(n,n)});function u(e){return e.done?l?l(e):e:i(()=>e.value,e=>i(()=>t(e),d,s))}let f;if(n){let e,t=n;f=n=>(e||=i(()=>n,e=>i(()=>t(e),d,s)),e)}return{next(){return e.next().then(u,f)},return(){let t=o?o.call(e).then(u,f):a({value:void 0,done:!0});return l?t.then(l):t},throw(t){return typeof e.throw==`function`?e.throw(t).then(u,f):s?s(t):c(t)},[Symbol.asyncIterator](){return this}}}function d(e){return{value:e,done:!1}}function f(e){return e?.[t]===`resolved`}function p(e){return e?.[t]===`rejected`}function m(e,t){return`finally`in e?e.finally(t):e.then(e=>{let r=t();return n(r)?r.then(()=>e):e},e=>{let r=t();if(n(r))return r.then(()=>{throw e});throw e})}function h(e){if(f(e))return e.__fakePromiseValue;if(p(e))throw e.__fakeRejectError;return e}})),ee=c(((exports,t)=>{let{EventEmitter:n}=p(`node:events`),{inherits:r}=p(`node:util`);function i(e){if(typeof e==`string`&&(e=Buffer.from(e)),!Buffer.isBuffer(e))throw TypeError(`The needle has to be a String or a Buffer.`);let t=e.length,n=t-1;if(t===0)throw Error(`The needle cannot be an empty String/Buffer.`);if(t>256)throw Error(`The needle cannot have a length bigger than 256.`);this.maxMatches=1/0,this.matches=0,this._occ=new Uint8Array(256).fill(t),this._lookbehind_size=0,this._needle=e,this._bufpos=0,this._lookbehind=Buffer.alloc(n);for(var r=0;r<n;++r)this._occ[e[r]]=n-r}r(i,n),i.prototype.reset=function(){this._lookbehind_size=0,this.matches=0,this._bufpos=0},i.prototype.push=function(e,t){Buffer.isBuffer(e)||(e=Buffer.from(e,`binary`));let n=e.length;this._bufpos=t||0;let r;for(;r!==n&&this.matches<this.maxMatches;)r=this._sbmh_feed(e);return r},i.prototype._sbmh_feed=function(e){let t=e.length,n=this._needle,r=n.length,i=r-1,a=n[i],o=-this._lookbehind_size,s;if(o<0){for(;o<0&&o<=t-r;){if(s=e[o+i],s===a&&this._sbmh_memcmp(e,o,i))return this._lookbehind_size=0,++this.matches,this.emit(`info`,!0),this._bufpos=o+r;o+=this._occ[s]}for(;o<0&&!this._sbmh_memcmp(e,o,t-o);)++o;if(o>=0)this.emit(`info`,!1,this._lookbehind,0,this._lookbehind_size),this._lookbehind_size=0;else{let n=this._lookbehind_size+o;return n>0&&this.emit(`info`,!1,this._lookbehind,0,n),this._lookbehind_size-=n,this._lookbehind.copy(this._lookbehind,0,n,this._lookbehind_size),e.copy(this._lookbehind,this._lookbehind_size),this._lookbehind_size+=t,this._bufpos=t,t}}if(o=e.indexOf(n,o+this._bufpos),o!==-1)return++this.matches,o===0?this.emit(`info`,!0):this.emit(`info`,!0,e,this._bufpos,o),this._bufpos=o+r;for(o=t-i,o<0&&(o=0);o!==t&&(e[o]!==n[0]||Buffer.compare(e.subarray(o+1,t),n.subarray(1,t-o))!==0);)++o;return o!==t&&(e.copy(this._lookbehind,0,o,t),this._lookbehind_size=t-o),o!==0&&this.emit(`info`,!1,e,this._bufpos,o),this._bufpos=t,t},i.prototype._sbmh_lookup_char=function(e,t){return t<0?this._lookbehind[this._lookbehind_size+t]:e[t]},i.prototype._sbmh_memcmp=function(e,t,n){for(var r=0;r<n;++r)if(this._sbmh_lookup_char(e,t+r)!==this._needle[r])return!1;return!0},t.exports=i})),te=c(((exports,t)=>{let n=p(`node:util`).inherits,r=p(`node:stream`).Readable;function i(e){r.call(this,e)}n(i,r),i.prototype._read=function(e){},t.exports=i})),z=c(((exports,t)=>{t.exports=function(e,t,n){if(!e||e[t]===void 0||e[t]===null)return n;if(typeof e[t]!=`number`||isNaN(e[t]))throw TypeError(`Limit `+t+` is not a valid number`);return e[t]}})),ne=c(((exports,t)=>{let n=p(`node:events`).EventEmitter,r=p(`node:util`).inherits,i=z(),a=ee(),o=Buffer.from(`\r
\r
`),s=/\r\n/g,c=/^([^:]+):[ \t]?([\x00-\xFF]+)?$/;function l(e){n.call(this),e||={};let t=this;this.nread=0,this.maxed=!1,this.npairs=0,this.maxHeaderPairs=i(e,`maxHeaderPairs`,2e3),this.maxHeaderSize=i(e,`maxHeaderSize`,80*1024),this.buffer=``,this.header={},this.finished=!1,this.ss=new a(o),this.ss.on(`info`,function(e,n,r,i){n&&!t.maxed&&(t.nread+i-r>=t.maxHeaderSize?(i=t.maxHeaderSize-t.nread+r,t.nread=t.maxHeaderSize,t.maxed=!0):t.nread+=i-r,t.buffer+=n.toString(`binary`,r,i)),e&&t._finish()})}r(l,n),l.prototype.push=function(e){let t=this.ss.push(e);if(this.finished)return t},l.prototype.reset=function(){this.finished=!1,this.buffer=``,this.header={},this.ss.reset()},l.prototype._finish=function(){this.buffer&&this._parseHeader(),this.ss.matches=this.ss.maxMatches;let e=this.header;this.header={},this.buffer=``,this.finished=!0,this.nread=this.npairs=0,this.maxed=!1,this.emit(`header`,e)},l.prototype._parseHeader=function(){if(this.npairs===this.maxHeaderPairs)return;let e=this.buffer.split(s),t=e.length,n,r;for(var i=0;i<t;++i){if(e[i].length===0)continue;if((e[i][0]===`	`||e[i][0]===` `)&&r){this.header[r][this.header[r].length-1]+=e[i];continue}let t=e[i].indexOf(`:`);if(t===-1||t===0)return;if(n=c.exec(e[i]),r=n[1].toLowerCase(),this.header[r]=this.header[r]||[],this.header[r].push(n[2]||``),++this.npairs===this.maxHeaderPairs)break}},t.exports=l})),re=c(((exports,t)=>{let n=p(`node:stream`).Writable,r=p(`node:util`).inherits,i=ee(),a=te(),o=ne(),s=Buffer.from(`-`),c=Buffer.from(`\r
`),l=function(){};function u(e){if(!(this instanceof u))return new u(e);if(n.call(this,e),!e||!e.headerFirst&&typeof e.boundary!=`string`)throw TypeError(`Boundary required`);typeof e.boundary==`string`?this.setBoundary(e.boundary):this._bparser=void 0,this._headerFirst=e.headerFirst,this._dashes=0,this._parts=0,this._finished=!1,this._realFinish=!1,this._isPreamble=!0,this._justMatched=!1,this._firstWrite=!0,this._inHeader=!0,this._part=void 0,this._cb=void 0,this._ignoreData=!1,this._partOpts={highWaterMark:e.partHwm},this._pause=!1;let t=this;this._hparser=new o(e),this._hparser.on(`header`,function(e){t._inHeader=!1,t._part.emit(`header`,e)})}r(u,n),u.prototype.emit=function(e){if(e===`finish`&&!this._realFinish){if(!this._finished){let e=this;process.nextTick(function(){if(e.emit(`error`,Error(`Unexpected end of multipart data`)),e._part&&!e._ignoreData){let t=e._isPreamble?`Preamble`:`Part`;e._part.emit(`error`,Error(t+` terminated early due to unexpected end of multipart data`)),e._part.push(null),process.nextTick(function(){e._realFinish=!0,e.emit(`finish`),e._realFinish=!1});return}e._realFinish=!0,e.emit(`finish`),e._realFinish=!1})}}else n.prototype.emit.apply(this,arguments)},u.prototype._write=function(e,t,n){if(!this._hparser&&!this._bparser)return n();if(this._headerFirst&&this._isPreamble){this._part||(this._part=new a(this._partOpts),this.listenerCount(`preamble`)===0?this._ignore():this.emit(`preamble`,this._part));let t=this._hparser.push(e);if(!this._inHeader&&t!==void 0&&t<e.length)e=e.slice(t);else return n()}this._firstWrite&&=(this._bparser.push(c),!1),this._bparser.push(e),this._pause?this._cb=n:n()},u.prototype.reset=function(){this._part=void 0,this._bparser=void 0,this._hparser=void 0},u.prototype.setBoundary=function(e){let t=this;this._bparser=new i(`\r
--`+e),this._bparser.on(`info`,function(e,n,r,i){t._oninfo(e,n,r,i)})},u.prototype._ignore=function(){this._part&&!this._ignoreData&&(this._ignoreData=!0,this._part.on(`error`,l),this._part.resume())},u.prototype._oninfo=function(e,t,n,r){let i,o=this,c=0,l,u=!0;if(!this._part&&this._justMatched&&t){for(;this._dashes<2&&n+c<r;)if(t[n+c]===45)++c,++this._dashes;else{this._dashes&&(i=s),this._dashes=0;break}if(this._dashes===2&&(n+c<r&&this.listenerCount(`trailer`)!==0&&this.emit(`trailer`,t.slice(n+c,r)),this.reset(),this._finished=!0,o._parts===0&&(o._realFinish=!0,o.emit(`finish`),o._realFinish=!1)),this._dashes)return}this._justMatched&&=!1,this._part||(this._part=new a(this._partOpts),this._part._read=function(e){o._unpause()},this._isPreamble&&this.listenerCount(`preamble`)!==0?this.emit(`preamble`,this._part):this._isPreamble!==!0&&this.listenerCount(`part`)!==0?this.emit(`part`,this._part):this._ignore(),this._isPreamble||(this._inHeader=!0)),t&&n<r&&!this._ignoreData&&(this._isPreamble||!this._inHeader?(i&&(u=this._part.push(i)),u=this._part.push(t.slice(n,r)),u||(this._pause=!0)):!this._isPreamble&&this._inHeader&&(i&&this._hparser.push(i),l=this._hparser.push(t.slice(n,r)),!this._inHeader&&l!==void 0&&l<r&&this._oninfo(!1,t,n+l,r))),e&&(this._hparser.reset(),this._isPreamble?this._isPreamble=!1:n!==r&&(++this._parts,this._part.on(`end`,function(){--o._parts===0&&(o._finished?(o._realFinish=!0,o.emit(`finish`),o._realFinish=!1):o._unpause())})),this._part.push(null),this._part=void 0,this._ignoreData=!1,this._justMatched=!0,this._dashes=0)},u.prototype._unpause=function(){if(this._pause&&(this._pause=!1,this._cb)){let e=this._cb;this._cb=void 0,e()}},t.exports=u})),B=c(((exports,t)=>{let n=new TextDecoder(`utf-8`),r=new Map([[`utf-8`,n],[`utf8`,n]]);function i(e){let t;for(;;)switch(e){case`utf-8`:case`utf8`:return a.utf8;case`latin1`:case`ascii`:case`us-ascii`:case`iso-8859-1`:case`iso8859-1`:case`iso88591`:case`iso_8859-1`:case`windows-1252`:case`iso_8859-1:1987`:case`cp1252`:case`x-cp1252`:return a.latin1;case`utf16le`:case`utf-16le`:case`ucs2`:case`ucs-2`:return a.utf16le;case`base64`:return a.base64;default:if(t===void 0){t=!0,e=e.toLowerCase();continue}return a.other.bind(e)}}let a={utf8:(e,t)=>e.length===0?``:(typeof e==`string`&&(e=Buffer.from(e,t)),e.utf8Slice(0,e.length)),latin1:(e,t)=>e.length===0?``:typeof e==`string`?e:e.latin1Slice(0,e.length),utf16le:(e,t)=>e.length===0?``:(typeof e==`string`&&(e=Buffer.from(e,t)),e.ucs2Slice(0,e.length)),base64:(e,t)=>e.length===0?``:(typeof e==`string`&&(e=Buffer.from(e,t)),e.base64Slice(0,e.length)),other:(t,n)=>{if(t.length===0)return``;if(typeof t==`string`&&(t=Buffer.from(t,n)),r.has(exports.toString()))try{return r.get(exports).decode(t)}catch{}return typeof t==`string`?t:t.toString()}};function o(e,t,n){return e&&i(n)(e,t)}t.exports=o})),V=c(((exports,t)=>{let n=B(),r=/%[a-fA-F0-9][a-fA-F0-9]/g,i={"%00":`\0`,"%01":``,"%02":``,"%03":``,"%04":``,"%05":``,"%06":``,"%07":`\x07`,"%08":`\b`,"%09":`	`,"%0a":`
`,"%0A":`
`,"%0b":`\v`,"%0B":`\v`,"%0c":`\f`,"%0C":`\f`,"%0d":`\r`,"%0D":`\r`,"%0e":``,"%0E":``,"%0f":``,"%0F":``,"%10":``,"%11":``,"%12":``,"%13":``,"%14":``,"%15":``,"%16":``,"%17":``,"%18":``,"%19":``,"%1a":``,"%1A":``,"%1b":`\x1B`,"%1B":`\x1B`,"%1c":``,"%1C":``,"%1d":``,"%1D":``,"%1e":``,"%1E":``,"%1f":``,"%1F":``,"%20":` `,"%21":`!`,"%22":`"`,"%23":`#`,"%24":`$`,"%25":`%`,"%26":`&`,"%27":`'`,"%28":`(`,"%29":`)`,"%2a":`*`,"%2A":`*`,"%2b":`+`,"%2B":`+`,"%2c":`,`,"%2C":`,`,"%2d":`-`,"%2D":`-`,"%2e":`.`,"%2E":`.`,"%2f":`/`,"%2F":`/`,"%30":`0`,"%31":`1`,"%32":`2`,"%33":`3`,"%34":`4`,"%35":`5`,"%36":`6`,"%37":`7`,"%38":`8`,"%39":`9`,"%3a":`:`,"%3A":`:`,"%3b":`;`,"%3B":`;`,"%3c":`<`,"%3C":`<`,"%3d":`=`,"%3D":`=`,"%3e":`>`,"%3E":`>`,"%3f":`?`,"%3F":`?`,"%40":`@`,"%41":`A`,"%42":`B`,"%43":`C`,"%44":`D`,"%45":`E`,"%46":`F`,"%47":`G`,"%48":`H`,"%49":`I`,"%4a":`J`,"%4A":`J`,"%4b":`K`,"%4B":`K`,"%4c":`L`,"%4C":`L`,"%4d":`M`,"%4D":`M`,"%4e":`N`,"%4E":`N`,"%4f":`O`,"%4F":`O`,"%50":`P`,"%51":`Q`,"%52":`R`,"%53":`S`,"%54":`T`,"%55":`U`,"%56":`V`,"%57":`W`,"%58":`X`,"%59":`Y`,"%5a":`Z`,"%5A":`Z`,"%5b":`[`,"%5B":`[`,"%5c":`\\`,"%5C":`\\`,"%5d":`]`,"%5D":`]`,"%5e":`^`,"%5E":`^`,"%5f":`_`,"%5F":`_`,"%60":"`","%61":`a`,"%62":`b`,"%63":`c`,"%64":`d`,"%65":`e`,"%66":`f`,"%67":`g`,"%68":`h`,"%69":`i`,"%6a":`j`,"%6A":`j`,"%6b":`k`,"%6B":`k`,"%6c":`l`,"%6C":`l`,"%6d":`m`,"%6D":`m`,"%6e":`n`,"%6E":`n`,"%6f":`o`,"%6F":`o`,"%70":`p`,"%71":`q`,"%72":`r`,"%73":`s`,"%74":`t`,"%75":`u`,"%76":`v`,"%77":`w`,"%78":`x`,"%79":`y`,"%7a":`z`,"%7A":`z`,"%7b":`{`,"%7B":`{`,"%7c":`|`,"%7C":`|`,"%7d":`}`,"%7D":`}`,"%7e":`~`,"%7E":`~`,"%7f":``,"%7F":``,"%80":``,"%81":``,"%82":``,"%83":``,"%84":``,"%85":``,"%86":``,"%87":``,"%88":``,"%89":``,"%8a":``,"%8A":``,"%8b":``,"%8B":``,"%8c":``,"%8C":``,"%8d":``,"%8D":``,"%8e":``,"%8E":``,"%8f":``,"%8F":``,"%90":``,"%91":``,"%92":``,"%93":``,"%94":``,"%95":``,"%96":``,"%97":``,"%98":``,"%99":``,"%9a":``,"%9A":``,"%9b":``,"%9B":``,"%9c":``,"%9C":``,"%9d":``,"%9D":``,"%9e":``,"%9E":``,"%9f":``,"%9F":``,"%a0":`\xA0`,"%A0":`\xA0`,"%a1":`¡`,"%A1":`¡`,"%a2":`¢`,"%A2":`¢`,"%a3":`£`,"%A3":`£`,"%a4":`¤`,"%A4":`¤`,"%a5":`¥`,"%A5":`¥`,"%a6":`¦`,"%A6":`¦`,"%a7":`§`,"%A7":`§`,"%a8":`¨`,"%A8":`¨`,"%a9":`©`,"%A9":`©`,"%aa":`ª`,"%Aa":`ª`,"%aA":`ª`,"%AA":`ª`,"%ab":`«`,"%Ab":`«`,"%aB":`«`,"%AB":`«`,"%ac":`¬`,"%Ac":`¬`,"%aC":`¬`,"%AC":`¬`,"%ad":`­`,"%Ad":`­`,"%aD":`­`,"%AD":`­`,"%ae":`®`,"%Ae":`®`,"%aE":`®`,"%AE":`®`,"%af":`¯`,"%Af":`¯`,"%aF":`¯`,"%AF":`¯`,"%b0":`°`,"%B0":`°`,"%b1":`±`,"%B1":`±`,"%b2":`²`,"%B2":`²`,"%b3":`³`,"%B3":`³`,"%b4":`´`,"%B4":`´`,"%b5":`µ`,"%B5":`µ`,"%b6":`¶`,"%B6":`¶`,"%b7":`·`,"%B7":`·`,"%b8":`¸`,"%B8":`¸`,"%b9":`¹`,"%B9":`¹`,"%ba":`º`,"%Ba":`º`,"%bA":`º`,"%BA":`º`,"%bb":`»`,"%Bb":`»`,"%bB":`»`,"%BB":`»`,"%bc":`¼`,"%Bc":`¼`,"%bC":`¼`,"%BC":`¼`,"%bd":`½`,"%Bd":`½`,"%bD":`½`,"%BD":`½`,"%be":`¾`,"%Be":`¾`,"%bE":`¾`,"%BE":`¾`,"%bf":`¿`,"%Bf":`¿`,"%bF":`¿`,"%BF":`¿`,"%c0":`À`,"%C0":`À`,"%c1":`Á`,"%C1":`Á`,"%c2":`Â`,"%C2":`Â`,"%c3":`Ã`,"%C3":`Ã`,"%c4":`Ä`,"%C4":`Ä`,"%c5":`Å`,"%C5":`Å`,"%c6":`Æ`,"%C6":`Æ`,"%c7":`Ç`,"%C7":`Ç`,"%c8":`È`,"%C8":`È`,"%c9":`É`,"%C9":`É`,"%ca":`Ê`,"%Ca":`Ê`,"%cA":`Ê`,"%CA":`Ê`,"%cb":`Ë`,"%Cb":`Ë`,"%cB":`Ë`,"%CB":`Ë`,"%cc":`Ì`,"%Cc":`Ì`,"%cC":`Ì`,"%CC":`Ì`,"%cd":`Í`,"%Cd":`Í`,"%cD":`Í`,"%CD":`Í`,"%ce":`Î`,"%Ce":`Î`,"%cE":`Î`,"%CE":`Î`,"%cf":`Ï`,"%Cf":`Ï`,"%cF":`Ï`,"%CF":`Ï`,"%d0":`Ð`,"%D0":`Ð`,"%d1":`Ñ`,"%D1":`Ñ`,"%d2":`Ò`,"%D2":`Ò`,"%d3":`Ó`,"%D3":`Ó`,"%d4":`Ô`,"%D4":`Ô`,"%d5":`Õ`,"%D5":`Õ`,"%d6":`Ö`,"%D6":`Ö`,"%d7":`×`,"%D7":`×`,"%d8":`Ø`,"%D8":`Ø`,"%d9":`Ù`,"%D9":`Ù`,"%da":`Ú`,"%Da":`Ú`,"%dA":`Ú`,"%DA":`Ú`,"%db":`Û`,"%Db":`Û`,"%dB":`Û`,"%DB":`Û`,"%dc":`Ü`,"%Dc":`Ü`,"%dC":`Ü`,"%DC":`Ü`,"%dd":`Ý`,"%Dd":`Ý`,"%dD":`Ý`,"%DD":`Ý`,"%de":`Þ`,"%De":`Þ`,"%dE":`Þ`,"%DE":`Þ`,"%df":`ß`,"%Df":`ß`,"%dF":`ß`,"%DF":`ß`,"%e0":`à`,"%E0":`à`,"%e1":`á`,"%E1":`á`,"%e2":`â`,"%E2":`â`,"%e3":`ã`,"%E3":`ã`,"%e4":`ä`,"%E4":`ä`,"%e5":`å`,"%E5":`å`,"%e6":`æ`,"%E6":`æ`,"%e7":`ç`,"%E7":`ç`,"%e8":`è`,"%E8":`è`,"%e9":`é`,"%E9":`é`,"%ea":`ê`,"%Ea":`ê`,"%eA":`ê`,"%EA":`ê`,"%eb":`ë`,"%Eb":`ë`,"%eB":`ë`,"%EB":`ë`,"%ec":`ì`,"%Ec":`ì`,"%eC":`ì`,"%EC":`ì`,"%ed":`í`,"%Ed":`í`,"%eD":`í`,"%ED":`í`,"%ee":`î`,"%Ee":`î`,"%eE":`î`,"%EE":`î`,"%ef":`ï`,"%Ef":`ï`,"%eF":`ï`,"%EF":`ï`,"%f0":`ð`,"%F0":`ð`,"%f1":`ñ`,"%F1":`ñ`,"%f2":`ò`,"%F2":`ò`,"%f3":`ó`,"%F3":`ó`,"%f4":`ô`,"%F4":`ô`,"%f5":`õ`,"%F5":`õ`,"%f6":`ö`,"%F6":`ö`,"%f7":`÷`,"%F7":`÷`,"%f8":`ø`,"%F8":`ø`,"%f9":`ù`,"%F9":`ù`,"%fa":`ú`,"%Fa":`ú`,"%fA":`ú`,"%FA":`ú`,"%fb":`û`,"%Fb":`û`,"%fB":`û`,"%FB":`û`,"%fc":`ü`,"%Fc":`ü`,"%fC":`ü`,"%FC":`ü`,"%fd":`ý`,"%Fd":`ý`,"%fD":`ý`,"%FD":`ý`,"%fe":`þ`,"%Fe":`þ`,"%fE":`þ`,"%FE":`þ`,"%ff":`ÿ`,"%Ff":`ÿ`,"%fF":`ÿ`,"%FF":`ÿ`};function a(e){return i[e]}function o(e){let t=[],i=0,o=``,s=!1,c=!1,l=0,u=``,d=e.length;for(var f=0;f<d;++f){let p=e[f];if(p===`\\`&&s)if(c)c=!1;else{c=!0;continue}else if(p===`"`)if(c)c=!1;else{if(s)for(s=!1,i=0;f+1<d&&e[f+1]!==`;`;)++f;else s=!0;continue}else if(c&&s&&(u+=`\\`),c=!1,(i===2||i===3)&&p===`'`){i===2?(i=3,o=u.substring(1)):i=1,u=``;continue}else if(i===0&&(p===`*`||p===`=`)&&t.length){i=p===`*`?2:1,t[l]=[u,void 0],u=``;continue}else if(!s&&p===`;`){i=0,o?(u.length&&(u=n(u.replace(r,a),`binary`,o)),o=``):u.length&&(u=n(u,`binary`,`utf8`)),t[l]===void 0?t[l]=u:t[l][1]=u,u=``,++l;continue}else if(!s&&(p===` `||p===`	`))continue;u+=p}return o&&u.length?u=n(u.replace(r,a),`binary`,o):u&&=n(u,`binary`,`utf8`),t[l]===void 0?u&&(t[l]=u):t[l][1]=u,t}t.exports=o})),ie=c(((exports,t)=>{t.exports=function(e){if(typeof e!=`string`)return``;for(var t=e.length-1;t>=0;--t)switch(e.charCodeAt(t)){case 47:case 92:return e=e.slice(t+1),e===`..`||e===`.`?``:e}return e===`..`||e===`.`?``:e}})),ae=c(((exports,t)=>{let{Readable:n}=p(`node:stream`),{inherits:r}=p(`node:util`),i=re(),a=V(),o=B(),s=ie(),c=z(),l=/^boundary$/i,u=/^form-data$/i,d=/^charset$/i,f=/^filename$/i,m=/^name$/i;h.detect=/^multipart\/form-data/i;function h(e,t){let n,r,p=this,h,v=t.limits,y=t.isPartAFile||((e,t,n)=>t===`application/octet-stream`||n!==void 0),b=t.parsedConType||[],x=t.defCharset||`utf8`,S=t.preservePath,C={highWaterMark:t.fileHwm};for(n=0,r=b.length;n<r;++n)if(Array.isArray(b[n])&&l.test(b[n][0])){h=b[n][1];break}function w(){P===0&&L&&!e._done&&(L=!1,p.end())}if(typeof h!=`string`)throw Error(`Multipart: Boundary not found`);let T=c(v,`fieldSize`,1*1024*1024),E=c(v,`fileSize`,1/0),D=c(v,`files`,1/0),O=c(v,`fields`,1/0),k=c(v,`parts`,1/0),A=c(v,`headerPairs`,2e3),j=c(v,`headerSize`,80*1024),M=0,N=0,P=0,F,I,L=!1;this._needDrain=!1,this._pause=!1,this._cb=void 0,this._nparts=0,this._boy=e;let R={boundary:h,maxHeaderPairs:A,maxHeaderSize:j,partHwm:C.highWaterMark,highWaterMark:t.highWaterMark};this.parser=new i(R),this.parser.on(`drain`,function(){if(p._needDrain=!1,p._cb&&!p._pause){let e=p._cb;p._cb=void 0,e()}}).on(`part`,function t(i){if(++p._nparts>k)return p.parser.removeListener(`part`,t),p.parser.on(`part`,g),e.hitPartsLimit=!0,e.emit(`partsLimit`),g(i);if(I){let e=I;e.emit(`end`),e.removeAllListeners(`end`)}i.on(`header`,function(t){let c,l,h,v,b,k,A=0;if(t[`content-type`]&&(h=a(t[`content-type`][0]),h[0])){for(c=h[0].toLowerCase(),n=0,r=h.length;n<r;++n)if(d.test(h[n][0])){v=h[n][1].toLowerCase();break}}if(c===void 0&&(c=`text/plain`),v===void 0&&(v=x),t[`content-disposition`]){if(h=a(t[`content-disposition`][0]),!u.test(h[0]))return g(i);for(n=0,r=h.length;n<r;++n)m.test(h[n][0])?l=h[n][1]:f.test(h[n][0])&&(k=h[n][1],S||(k=s(k)))}else return g(i);b=t[`content-transfer-encoding`]?t[`content-transfer-encoding`][0].toLowerCase():`7bit`;let j,L;if(y(l,c,k)){if(M===D)return e.hitFilesLimit||(e.hitFilesLimit=!0,e.emit(`filesLimit`)),g(i);if(++M,e.listenerCount(`file`)===0){p.parser._ignore();return}++P;let t=new _(C);F=t,t.on(`end`,function(){if(--P,p._pause=!1,w(),p._cb&&!p._needDrain){let e=p._cb;p._cb=void 0,e()}}),t._read=function(e){if(p._pause&&(p._pause=!1,p._cb&&!p._needDrain)){let e=p._cb;p._cb=void 0,e()}},e.emit(`file`,l,t,k,b,c),j=function(e){if((A+=e.length)>E){let n=E-A+e.length;n>0&&t.push(e.slice(0,n)),t.truncated=!0,t.bytesRead=E,i.removeAllListeners(`data`),t.emit(`limit`);return}else t.push(e)||(p._pause=!0);t.bytesRead=A},L=function(){F=void 0,t.push(null)}}else{if(N===O)return e.hitFieldsLimit||(e.hitFieldsLimit=!0,e.emit(`fieldsLimit`)),g(i);++N,++P;let t=``,n=!1;I=i,j=function(e){if((A+=e.length)>T){let r=T-(A-e.length);t+=e.toString(`binary`,0,r),n=!0,i.removeAllListeners(`data`)}else t+=e.toString(`binary`)},L=function(){I=void 0,t.length&&(t=o(t,`binary`,v)),e.emit(`field`,l,t,!1,n,b,c),--P,w()}}i._readableState.sync=!1,i.on(`data`,j),i.on(`end`,L)}).on(`error`,function(e){F&&F.emit(`error`,e)})}).on(`error`,function(t){e.emit(`error`,t)}).on(`finish`,function(){L=!0,w()})}h.prototype.write=function(e,t){let n=this.parser.write(e);n&&!this._pause?t():(this._needDrain=!n,this._cb=t)},h.prototype.end=function(){let e=this;e.parser.writable?e.parser.end():e._boy._done||process.nextTick(function(){e._boy._done=!0,e._boy.emit(`finish`)})};function g(e){e.resume()}function _(e){n.call(this,e),this.bytesRead=0,this.truncated=!1}r(_,n),_.prototype._read=function(e){},t.exports=h})),oe=c(((exports,t)=>{let n=/\+/g,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function i(){this.buffer=void 0}i.prototype.write=function(e){e=e.replace(n,` `);let t=``,i=0,a=0,o=e.length;for(;i<o;++i)this.buffer===void 0?e[i]===`%`&&(i>a&&(t+=e.substring(a,i),a=i),this.buffer=``,++a):r[e.charCodeAt(i)]?(this.buffer+=e[i],++a,this.buffer.length===2&&(t+=String.fromCharCode(parseInt(this.buffer,16)),this.buffer=void 0)):(t+=`%`+this.buffer,this.buffer=void 0,--i);return a<o&&this.buffer===void 0&&(t+=e.substring(a)),t},i.prototype.reset=function(){this.buffer=void 0},t.exports=i})),se=c(((exports,t)=>{let n=oe(),r=B(),i=z(),a=/^charset$/i;o.detect=/^application\/x-www-form-urlencoded/i;function o(e,t){let r=t.limits,o=t.parsedConType;this.boy=e,this.fieldSizeLimit=i(r,`fieldSize`,1*1024*1024),this.fieldNameSizeLimit=i(r,`fieldNameSize`,100),this.fieldsLimit=i(r,`fields`,1/0);let s;for(var c=0,l=o.length;c<l;++c)if(Array.isArray(o[c])&&a.test(o[c][0])){s=o[c][1].toLowerCase();break}s===void 0&&(s=t.defCharset||`utf8`),this.decoder=new n,this.charset=s,this._fields=0,this._state=`key`,this._checkingBytes=!0,this._bytesKey=0,this._bytesVal=0,this._key=``,this._val=``,this._keyTrunc=!1,this._valTrunc=!1,this._hitLimit=!1}o.prototype.write=function(e,t){if(this._fields===this.fieldsLimit)return this.boy.hitFieldsLimit||(this.boy.hitFieldsLimit=!0,this.boy.emit(`fieldsLimit`)),t();let n,i,a,o=0,s=e.length;for(;o<s;)if(this._state===`key`){for(n=i=void 0,a=o;a<s;++a){if(this._checkingBytes||++o,e[a]===61){n=a;break}else if(e[a]===38){i=a;break}if(this._checkingBytes&&this._bytesKey===this.fieldNameSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesKey}if(n!==void 0)n>o&&(this._key+=this.decoder.write(e.toString(`binary`,o,n))),this._state=`val`,this._hitLimit=!1,this._checkingBytes=!0,this._val=``,this._bytesVal=0,this._valTrunc=!1,this.decoder.reset(),o=n+1;else if(i!==void 0){++this._fields;let n,a=this._keyTrunc;if(n=i>o?this._key+=this.decoder.write(e.toString(`binary`,o,i)):this._key,this._hitLimit=!1,this._checkingBytes=!0,this._key=``,this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),n.length&&this.boy.emit(`field`,r(n,`binary`,this.charset),``,a,!1),o=i+1,this._fields===this.fieldsLimit)return t()}else this._hitLimit?(a>o&&(this._key+=this.decoder.write(e.toString(`binary`,o,a))),o=a,(this._bytesKey=this._key.length)===this.fieldNameSizeLimit&&(this._checkingBytes=!1,this._keyTrunc=!0)):(o<s&&(this._key+=this.decoder.write(e.toString(`binary`,o))),o=s)}else{for(i=void 0,a=o;a<s;++a){if(this._checkingBytes||++o,e[a]===38){i=a;break}if(this._checkingBytes&&this._bytesVal===this.fieldSizeLimit){this._hitLimit=!0;break}else this._checkingBytes&&++this._bytesVal}if(i!==void 0){if(++this._fields,i>o&&(this._val+=this.decoder.write(e.toString(`binary`,o,i))),this.boy.emit(`field`,r(this._key,`binary`,this.charset),r(this._val,`binary`,this.charset),this._keyTrunc,this._valTrunc),this._state=`key`,this._hitLimit=!1,this._checkingBytes=!0,this._key=``,this._bytesKey=0,this._keyTrunc=!1,this.decoder.reset(),o=i+1,this._fields===this.fieldsLimit)return t()}else this._hitLimit?(a>o&&(this._val+=this.decoder.write(e.toString(`binary`,o,a))),o=a,(this._val===``&&this.fieldSizeLimit===0||(this._bytesVal=this._val.length)===this.fieldSizeLimit)&&(this._checkingBytes=!1,this._valTrunc=!0)):(o<s&&(this._val+=this.decoder.write(e.toString(`binary`,o))),o=s)}t()},o.prototype.end=function(){this.boy._done||(this._state===`key`&&this._key.length>0?this.boy.emit(`field`,r(this._key,`binary`,this.charset),``,this._keyTrunc,!1):this._state===`val`&&this.boy.emit(`field`,r(this._key,`binary`,this.charset),r(this._val,`binary`,this.charset),this._keyTrunc,this._valTrunc),this.boy._done=!0,this.boy.emit(`finish`))},t.exports=o})),ce=c(((exports,t)=>{let n=p(`node:stream`).Writable,{inherits:r}=p(`node:util`),i=re(),a=ae(),o=se(),s=V();function c(e){if(!(this instanceof c))return new c(e);if(typeof e!=`object`)throw TypeError(`Busboy expected an options-Object.`);if(typeof e.headers!=`object`)throw TypeError(`Busboy expected an options-Object with headers-attribute.`);if(typeof e.headers[`content-type`]!=`string`)throw TypeError(`Missing Content-Type-header.`);let{headers:t,...r}=e;this.opts={autoDestroy:!1,...r},n.call(this,this.opts),this._done=!1,this._parser=this.getParserByHeaders(t),this._finished=!1}r(c,n),c.prototype.emit=function(e){if(e===`finish`){if(this._done){if(this._finished)return}else{this._parser?.end();return}this._finished=!0}n.prototype.emit.apply(this,arguments)},c.prototype.getParserByHeaders=function(e){let t=s(e[`content-type`]),n={defCharset:this.opts.defCharset,fileHwm:this.opts.fileHwm,headers:e,highWaterMark:this.opts.highWaterMark,isPartAFile:this.opts.isPartAFile,limits:this.opts.limits,parsedConType:t,preservePath:this.opts.preservePath};if(a.detect.test(t[0]))return new a(this,n);if(o.detect.test(t[0]))return new o(this,n);throw Error(`Unsupported Content-Type.`)},c.prototype._write=function(e,t,n){this._parser.write(e,n)},t.exports=c,t.exports.default=c,t.exports.Busboy=c,t.exports.Dicer=i})),H=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.fakePromise=void 0,exports.getHeadersObj=r,exports.defaultHeadersSerializer=i,exports.isArrayBufferView=o,exports.isNodeReadable=s,exports.isIterable=c,exports.shouldRedirect=l,exports.pipeThrough=u,exports.endStream=d,exports.safeWrite=f;let t=p(`node:events`);function n(e){return e?.forEach!=null}function r(e){return e==null||!n(e)?e:e.headersInit&&!e._map&&!n(e.headersInit)?e.headersInit:Object.fromEntries(e.entries())}function i(e,t){let n=[];return e.forEach((e,r)=>{t&&r===`content-length`&&t(e),n.push(`${r}: ${e}`)}),n}var a=R();Object.defineProperty(exports,`fakePromise`,{enumerable:!0,get:function(){return a.fakePromise}});function o(e){return e!=null&&e.buffer!=null&&e.byteLength!=null&&e.byteOffset!=null}function s(e){return e!=null&&e.pipe!=null}function c(e){return e?.[Symbol.iterator]!=null}function l(e){return e===301||e===302||e===303||e===307||e===308}function u({src:e,dest:t,signal:n,onError:r}){if(r&&t.once(`error`,r),e.once(`error`,e=>{t.destroy(e)}),t.once(`close`,()=>{e.destroyed||e.destroy()}),n){let t=new WeakRef(e),r=new WeakRef(n);function i(){r.deref()?.removeEventListener(`abort`,a),t.deref()?.removeListener(`end`,i),t.deref()?.removeListener(`error`,i),t.deref()?.removeListener(`close`,i)}function a(){t.deref()?.destroy(new m),i()}n.addEventListener(`abort`,a,{once:!0}),e.once(`end`,i),e.once(`error`,i),e.once(`close`,i)}e.pipe(t,{end:!0})}function d(e){return e.end(null,null,null)}function f(e,n){let r=n.write(e);if(!r)return(0,t.once)(n,`drain`)}var m=class extends Error{constructor(e=`The operation was aborted`,t=void 0){super(e,t),this.name=`AbortError`}}})),U=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillReadableStream=void 0;let t=p(`node:buffer`),n=p(`node:events`),r=p(`node:stream`),i=p(`node:stream/promises`),a=R(),o=H();function s(e,n){let r=[],i=!1,a=!1;return{desiredSize:e,enqueue(e){let i=typeof e==`string`?t.Buffer.from(e):e;a?n.push(i):r.push(i)},close(){r.length>0&&this._flush(),n.push(null),i=!0},error(e){r.length>0&&this._flush(),n.destroy(e)},get _closed(){return i},_flush(){if(a=!0,r.length>0){let e=r.length>1?t.Buffer.concat(r):r[0];n.push(e),r=[]}}}}function c(e){return e?.read!=null}function l(e){return e?.getReader!=null}var u=class e{readable;constructor(t){if(t instanceof e&&t.readable!=null)this.readable=t.readable;else if(c(t))this.readable=t;else if(l(t))this.readable=r.Readable.fromWeb(t);else{let e=!1,n=!1,i=n=>{if(!e){let r=s(n,this.readable);return e=!0,(0,a.handleMaybePromise)(()=>t?.start?.(r),()=>(r._flush(),!r._closed))}return!0},o=e=>(0,a.handleMaybePromise)(()=>i(e),r=>{if(!r)return;let i=s(e,this.readable);return(0,a.handleMaybePromise)(()=>t?.pull?.(i),()=>{i._flush(),n=!1})});this.readable=new r.Readable({read(e){if(!n)return n=!0,o(e)},destroy(e,n){if(t?.cancel)try{let r=t.cancel(e);if(r?.then)return r.then(()=>{n(null)},e=>{n(e)})}catch(e){n(e);return}n(null)}})}}cancel(e){return this.readable.destroy(e),(0,n.once)(this.readable,`close`)}locked=!1;getReader(e){let t=this.readable[Symbol.asyncIterator]();this.locked=!0;let r=this.readable;return{read(){return t.next()},releaseLock:()=>{if(t.return){let e=t.return();if(e.then){e.then(()=>{this.locked=!1});return}}this.locked=!1},cancel:e=>{if(t.return){let n=t.return(e);if(n.then)return n.then(()=>{this.locked=!1})}return this.locked=!1,(0,o.fakePromise)()},get closed(){return Promise.race([(0,n.once)(r,`end`),(0,n.once)(r,`error`).then(e=>Promise.reject(e))])}}}[Symbol.asyncIterator](){let e=this.readable[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return this},next:()=>e.next(),return:()=>(this.readable.destroyed||this.readable.destroy(),e.return?.()||(0,o.fakePromise)({done:!0,value:void 0})),throw:t=>(this.readable.destroyed||this.readable.destroy(t),e.throw?.(t)||(0,o.fakePromise)({done:!0,value:void 0}))}}tee(){throw Error(`Not implemented`)}async pipeToWriter(e){try{for await(let t of this)await e.write(t);await e.close()}catch(t){await e.abort(t)}}pipeTo(e){if(f(e))return(0,i.pipeline)(this.readable,e.writable,{end:!0});{let t=e.getWriter();return this.pipeToWriter(t)}}pipeThrough({writable:e,readable:t}){return this.pipeTo(e).catch(e=>{this.readable.destroy(e)}),d(t)&&(t.readable.once(`error`,e=>this.readable.destroy(e)),t.readable.once(`finish`,()=>this.readable.push(null)),t.readable.once(`close`,()=>this.readable.push(null))),t}static[Symbol.hasInstance](e){return l(e)}static from(t){return new e(r.Readable.from(t))}[Symbol.toStringTag]=`ReadableStream`};exports.PonyfillReadableStream=u;function d(e){return e?.readable!=null}function f(e){return e?.writable!=null}})),W=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillBlob=void 0,exports.hasBufferMethod=a,exports.hasArrayBufferMethod=o,exports.hasBytesMethod=s,exports.hasTextMethod=c,exports.hasSizeProperty=l,exports.hasStreamMethod=u,exports.hasBlobSignature=d,exports.isArrayBuffer=f;let t=p(`node:buffer`),n=U(),r=H();function i(e){return typeof e==`string`?t.Buffer.from(e):t.Buffer.isBuffer(e)?e:(0,r.isArrayBufferView)(e)?t.Buffer.from(e.buffer,e.byteOffset,e.byteLength):t.Buffer.from(e)}function a(e){return e!=null&&e.buffer!=null&&typeof e.buffer==`function`}function o(e){return e!=null&&e.arrayBuffer!=null&&typeof e.arrayBuffer==`function`}function s(e){return e!=null&&e.bytes!=null&&typeof e.bytes==`function`}function c(e){return e!=null&&e.text!=null&&typeof e.text==`function`}function l(e){return e!=null&&typeof e.size==`number`}function u(e){return e!=null&&e.stream!=null&&typeof e.stream==`function`}function d(e){return e!=null&&e[Symbol.toStringTag]===`Blob`}function f(e){return e!=null&&e.byteLength!=null&&e.slice!=null}var m=class{blobParts;type;encoding;_size=null;constructor(e=[],t){if(this.blobParts=e,this.type=t?.type||`application/octet-stream`,this.encoding=t?.encoding||`utf8`,this._size=t?.size||null,e.length===1&&d(e[0]))return e[0]}_buffer=null;buffer(){if(this._buffer)return(0,r.fakePromise)(this._buffer);if(this.blobParts.length===1){let e=this.blobParts[0];return a(e)?e.buffer().then(e=>(this._buffer=e,this._buffer)):s(e)?e.bytes().then(e=>(this._buffer=t.Buffer.from(e),this._buffer)):o(e)?e.arrayBuffer().then(n=>(this._buffer=t.Buffer.from(n,void 0,e.size),this._buffer)):(this._buffer=i(e),(0,r.fakePromise)(this._buffer))}let e=[],n=this.blobParts.map((r,c)=>{if(a(r)){e.push(r.buffer().then(e=>{n[c]=e}));return}else if(o(r)){e.push(r.arrayBuffer().then(e=>{n[c]=t.Buffer.from(e,void 0,r.size)}));return}else if(s(r)){e.push(r.bytes().then(e=>{n[c]=t.Buffer.from(e)}));return}else return i(r)});return e.length>0?Promise.all(e).then(()=>t.Buffer.concat(n,this._size||void 0)):(0,r.fakePromise)(t.Buffer.concat(n,this._size||void 0))}arrayBuffer(){if(this._buffer)return(0,r.fakePromise)(this._buffer);if(this.blobParts.length===1){if(f(this.blobParts[0]))return(0,r.fakePromise)(this.blobParts[0]);if(o(this.blobParts[0]))return this.blobParts[0].arrayBuffer()}return this.buffer()}bytes(){if(this._buffer)return(0,r.fakePromise)(this._buffer);if(this.blobParts.length===1){if(t.Buffer.isBuffer(this.blobParts[0]))return this._buffer=this.blobParts[0],(0,r.fakePromise)(this._buffer);if(this.blobParts[0]instanceof Uint8Array)return this._buffer=t.Buffer.from(this.blobParts[0]),(0,r.fakePromise)(this._buffer);if(s(this.blobParts[0]))return this.blobParts[0].bytes();if(a(this.blobParts[0]))return this.blobParts[0].buffer()}return this.buffer()}_text=null;text(){if(this._text)return(0,r.fakePromise)(this._text);if(this.blobParts.length===1){let e=this.blobParts[0];if(typeof e==`string`)return this._text=e,(0,r.fakePromise)(this._text);if(c(e))return e.text().then(e=>(this._text=e,this._text));let t=i(e);return this._text=t.toString(this.encoding),(0,r.fakePromise)(this._text)}return this.buffer().then(e=>(this._text=e.toString(this.encoding),this._text))}_json=null;json(){return this._json?(0,r.fakePromise)(this._json):this.text().then(e=>(this._json=JSON.parse(e),this._json))}_formData=null;formData(){if(this._formData)return(0,r.fakePromise)(this._formData);throw Error(`Not implemented`)}get size(){if(this._size==null){this._size=0;for(let e of this.blobParts)typeof e==`string`?this._size+=t.Buffer.byteLength(e):l(e)?this._size+=e.size:(0,r.isArrayBufferView)(e)&&(this._size+=e.byteLength)}return this._size}stream(){if(this.blobParts.length===1){let e=this.blobParts[0];if(u(e))return e.stream();let t=i(e);return new n.PonyfillReadableStream({start:e=>{e.enqueue(t),e.close()}})}if(this._buffer!=null)return new n.PonyfillReadableStream({start:e=>{e.enqueue(this._buffer),e.close()}});let e;return new n.PonyfillReadableStream({start:t=>{if(this.blobParts.length===0){t.close();return}e=this.blobParts[Symbol.iterator]()},pull:n=>{let{value:r,done:c}=e.next();if(c){n.close();return}if(r){if(a(r))return r.buffer().then(e=>{n.enqueue(e)});if(s(r))return r.bytes().then(e=>{let r=t.Buffer.from(e);n.enqueue(r)});if(o(r))return r.arrayBuffer().then(e=>{let i=t.Buffer.from(e,void 0,r.size);n.enqueue(i)});let e=i(r);n.enqueue(e)}}})}slice(){throw Error(`Not implemented`)}};exports.PonyfillBlob=m})),G=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillFile=void 0;let t=W();var n=class extends t.PonyfillBlob{name;lastModified;constructor(e,t,n){super(e,n),this.name=t,this.lastModified=n?.lastModified||Date.now()}webkitRelativePath=``};exports.PonyfillFile=n})),K={};l(K,{__addDisposableResource:()=>Ne,__assign:()=>X,__asyncDelegator:()=>Te,__asyncGenerator:()=>we,__asyncValues:()=>Ee,__await:()=>Y,__awaiter:()=>ge,__classPrivateFieldGet:()=>Ae,__classPrivateFieldIn:()=>Me,__classPrivateFieldSet:()=>je,__createBinding:()=>Z,__decorate:()=>le,__disposeResources:()=>Pe,__esDecorate:()=>de,__exportStar:()=>ve,__extends:()=>q,__generator:()=>_e,__importDefault:()=>ke,__importStar:()=>Oe,__makeTemplateObject:()=>De,__metadata:()=>he,__param:()=>ue,__propKey:()=>pe,__read:()=>be,__rest:()=>J,__rewriteRelativeImportExtension:()=>Fe,__runInitializers:()=>fe,__setFunctionName:()=>me,__spread:()=>xe,__spreadArray:()=>Ce,__spreadArrays:()=>Se,__values:()=>ye,default:()=>Be});function q(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Class extends value `+String(t)+` is not a constructor or null`);Ie(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function J(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function le(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function ue(e,t){return function(n,r){t(n,r,e)}}function de(e,t,n,r,i,a){function o(e){if(e!==void 0&&typeof e!=`function`)throw TypeError(`Function expected`);return e}for(var s=r.kind,c=s===`getter`?`get`:s===`setter`?`set`:`value`,l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,f=!1,p=n.length-1;p>=0;p--){var m={};for(var h in r)m[h]=h===`access`?{}:r[h];for(var h in r.access)m.access[h]=r.access[h];m.addInitializer=function(e){if(f)throw TypeError(`Cannot add initializers after decoration has completed`);a.push(o(e||null))};var g=(0,n[p])(s===`accessor`?{get:u.get,set:u.set}:u[c],m);if(s===`accessor`){if(g===void 0)continue;if(typeof g!=`object`||!g)throw TypeError(`Object expected`);(d=o(g.get))&&(u.get=d),(d=o(g.set))&&(u.set=d),(d=o(g.init))&&i.unshift(d)}else (d=o(g))&&(s===`field`?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),f=!0}function fe(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function pe(e){return typeof e==`symbol`?e:`${e}`}function me(e,t,n){return typeof t==`symbol`&&(t=t.description?`[${t.description}]`:``),Object.defineProperty(e,`name`,{configurable:!0,value:n?`${n} ${t}`:t})}function he(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function ge(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function _e(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o=Object.create((typeof Iterator==`function`?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(s){if(r)throw TypeError(`Generator is already executing.`);for(;o&&(o=0,s[0]&&(n=0)),n;)try{if(r=1,i&&(a=s[0]&2?i.return:s[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;switch(i=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(e){s=[6,e],i=0}finally{r=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function ve(e,t){for(var n in e)n!==`default`&&!Object.prototype.hasOwnProperty.call(t,n)&&Z(t,e,n)}function ye(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function be(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function xe(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(be(arguments[t]));return e}function Se(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function Ce(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function we(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator==`function`?AsyncIterator:Object).prototype),s(`next`),s(`throw`),s(`return`,o),i[Symbol.asyncIterator]=function(){return this},i;function o(e){return function(t){return Promise.resolve(t).then(e,d)}}function s(e,t){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||c(e,t)})},t&&(i[e]=t(i[e])))}function c(e,t){try{l(r[e](t))}catch(e){f(a[0][3],e)}}function l(e){e.value instanceof Y?Promise.resolve(e.value.v).then(u,d):f(a[0][2],e)}function u(e){c(`next`,e)}function d(e){c(`throw`,e)}function f(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Te(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:Y(e[r](t)),done:!1}:i?i(t):t}:i}}function Ee(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ye==`function`?ye(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function De(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function Oe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Re(e),r=0;r<n.length;r++)n[r]!==`default`&&Z(t,e,n[r]);return Le(t,e),t}function ke(e){return e&&e.__esModule?e:{default:e}}function Ae(e,t,n,r){if(n===`a`&&!r)throw TypeError(`Private accessor was defined without a getter`);if(typeof t==`function`?e!==t||!r:!t.has(e))throw TypeError(`Cannot read private member from an object whose class did not declare it`);return n===`m`?r:n===`a`?r.call(e):r?r.value:t.get(e)}function je(e,t,n,r,i){if(r===`m`)throw TypeError(`Private method is not writable`);if(r===`a`&&!i)throw TypeError(`Private accessor was defined without a setter`);if(typeof t==`function`?e!==t||!i:!t.has(e))throw TypeError(`Cannot write private member to an object whose class did not declare it`);return r===`a`?i.call(e,n):i?i.value=n:t.set(e,n),n}function Me(e,t){if(t===null||typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Cannot use 'in' operator on non-object`);return typeof e==`function`?t===e:e.has(t)}function Ne(e,t,n){if(t!=null){if(typeof t!=`object`&&typeof t!=`function`)throw TypeError(`Object expected.`);var r,i;if(n){if(!Symbol.asyncDispose)throw TypeError(`Symbol.asyncDispose is not defined.`);r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw TypeError(`Symbol.dispose is not defined.`);r=t[Symbol.dispose],n&&(i=r)}if(typeof r!=`function`)throw TypeError(`Object not disposable.`);i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}function Pe(e){function t(t){e.error=e.hasError?new ze(t,e.error,`An error was suppressed during disposal.`):t,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,function(e){return t(e),i()})}else r|=1}catch(e){t(e)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function Fe(e,t){return typeof e==`string`&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,r,i,a){return n?t?`.jsx`:`.js`:r&&(!i||!a)?e:r+i+`.`+a.toLowerCase()+`js`}):e}var Ie,X,Z,Le,Re,ze,Be,Ve=s((()=>{Ie=function(e,t){return Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ie(e,t)},X=function(){return X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},X.apply(this,arguments)},Z=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||(`get`in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Le=Object.create?(function(e,t){Object.defineProperty(e,`default`,{enumerable:!0,value:t})}):function(e,t){e.default=t},Re=function(e){return Re=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},Re(e)},ze=typeof SuppressedError==`function`?SuppressedError:function(e,t,n){var r=Error(n);return r.name=`SuppressedError`,r.error=e,r.suppressed=t,r},Be={__extends:q,__assign:X,__rest:J,__decorate:le,__param:ue,__esDecorate:de,__runInitializers:fe,__propKey:pe,__setFunctionName:me,__metadata:he,__awaiter:ge,__generator:_e,__createBinding:Z,__exportStar:ve,__values:ye,__read:be,__spread:xe,__spreadArrays:Se,__spreadArray:Ce,__await:Y,__asyncGenerator:we,__asyncDelegator:Te,__asyncValues:Ee,__makeTemplateObject:De,__importStar:Oe,__importDefault:ke,__classPrivateFieldGet:Ae,__classPrivateFieldSet:je,__classPrivateFieldIn:Me,__addDisposableResource:Ne,__disposeResources:Pe,__rewriteRelativeImportExtension:Fe}})),He=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillSuppressedError=void 0;var t=class extends Error{error;suppressed;constructor(e,t,n){super(n),this.error=e,this.suppressed=t,this.name=`SuppressedError`,Error.captureStackTrace(this,this.constructor)}};exports.PonyfillSuppressedError=t})),Ue=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.DisposableSymbols=void 0,exports.patchSymbols=t,exports.DisposableSymbols={get dispose(){return Symbol.dispose||Symbol.for(`dispose`)},get asyncDispose(){return Symbol.asyncDispose||Symbol.for(`asyncDispose`)}};function t(){Symbol.dispose||=Symbol.for(`dispose`),Symbol.asyncDispose||=Symbol.for(`asyncDispose`)}})),We=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.isSyncDisposable=n,exports.isAsyncDisposable=r;let t=Ue();function n(e){return e?.[t.DisposableSymbols.dispose]!=null}function r(e){return e?.[t.DisposableSymbols.asyncDispose]!=null}})),Ge=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillAsyncDisposableStack=void 0;let t=R(),n=He(),r=Ue(),i=We(),a=globalThis.SuppressedError||n.PonyfillSuppressedError;var o=class e{callbacks=[];get disposed(){return this.callbacks.length===0}use(e){return(0,i.isAsyncDisposable)(e)?this.callbacks.push(()=>e[r.DisposableSymbols.asyncDispose]()):(0,i.isSyncDisposable)(e)&&this.callbacks.push(()=>e[r.DisposableSymbols.dispose]()),e}adopt(e,t){return t&&this.callbacks.push(()=>t(e)),e}defer(e){e&&this.callbacks.push(e)}move(){let t=new e;return t.callbacks=this.callbacks,this.callbacks=[],t}disposeAsync(){return this[r.DisposableSymbols.asyncDispose]()}_error;_iterateCallbacks(){let e=this.callbacks.pop();if(e)return(0,t.handleMaybePromise)(e,()=>this._iterateCallbacks(),e=>(this._error=this._error?new a(e,this._error):e,this._iterateCallbacks()))}[r.DisposableSymbols.asyncDispose](){let e=this._iterateCallbacks();if(e?.then)return e.then(()=>{if(this._error){let e=this._error;throw this._error=void 0,e}});if(this._error){let e=this._error;throw this._error=void 0,e}}[Symbol.toStringTag]=`AsyncDisposableStack`};exports.PonyfillAsyncDisposableStack=o})),Ke=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillDisposableStack=void 0;let t=He(),n=Ue(),r=We(),i=globalThis.SuppressedError||t.PonyfillSuppressedError;var a=class e{callbacks=[];get disposed(){return this.callbacks.length===0}use(e){return(0,r.isSyncDisposable)(e)&&this.callbacks.push(()=>e[n.DisposableSymbols.dispose]()),e}adopt(e,t){return t&&this.callbacks.push(()=>t(e)),e}defer(e){e&&this.callbacks.push(e)}move(){let t=new e;return t.callbacks=this.callbacks,this.callbacks=[],t}dispose(){return this[n.DisposableSymbols.dispose]()}_error;_iterateCallbacks(){let e=this.callbacks.pop();if(e){try{e()}catch(e){this._error=this._error?new i(e,this._error):e}return this._iterateCallbacks()}}[n.DisposableSymbols.dispose](){if(this._iterateCallbacks(),this._error){let e=this._error;throw this._error=void 0,e}}[Symbol.toStringTag]=`DisposableStack`};exports.PonyfillDisposableStack=a})),qe=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.SuppressedError=exports.AsyncDisposableStack=exports.DisposableStack=void 0;let t=(Ve(),f(K)),n=Ge(),r=Ke(),i=He();exports.DisposableStack=globalThis.DisposableStack||r.PonyfillDisposableStack,exports.AsyncDisposableStack=globalThis.AsyncDisposableStack||n.PonyfillAsyncDisposableStack,exports.SuppressedError=globalThis.SuppressedError||i.PonyfillSuppressedError,t.__exportStar(Ue(),exports)})),Je=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillIteratorObject=void 0;let t=p(`node:util`),n=qe(),r=H();var i=class{iterableIterator;[Symbol.toStringTag]=`IteratorObject`;constructor(e,t){this.iterableIterator=e,this[Symbol.toStringTag]=t}*map(e){let t=0;for(let n of this.iterableIterator)yield e(n,t++)}*filter(e){let t=0;for(let n of this.iterableIterator)e(n,t++)&&(yield n)}reduce(e,t){let n=0,r=t;for(let t of this.iterableIterator)r=e(r,t,n++);return r}forEach(e){let t=0;for(let n of this.iterableIterator)e(n,t++)}*take(e){let t=0;for(let n of this.iterableIterator){if(t>=e)break;yield n,t++}}*drop(e){let t=0;for(let n of this.iterableIterator)t>=e&&(yield n),t++}*flatMap(e){let t=0;for(let n of this.iterableIterator){let i=e(n,t++);if((0,r.isIterable)(i))for(let e of i)yield e;else for(let e of{[Symbol.iterator]:()=>i})yield e}}some(e){let t=0;for(let n of this.iterableIterator)if(e(n,t++))return!0;return!1}every(e){let t=0;for(let n of this.iterableIterator)if(!e(n,t++))return!1;return!0}find(e){let t=0;for(let n of this.iterableIterator)if(e(n,t++))return n}toArray(){return Array.from(this.iterableIterator)}[n.DisposableSymbols.dispose](){this.iterableIterator.return?.()}next(...[e]){return this.iterableIterator.next(e)}[Symbol.iterator](){return this}[Symbol.for(`nodejs.util.inspect.custom`)](){let e={};return this.forEach((n,r)=>{let i=(0,t.inspect)(n);e[r]=i.includes(`,`)?i.split(`,`).map(e=>e.trim()):i}),`${this[Symbol.toStringTag]} ${(0,t.inspect)(e)}`}};exports.PonyfillIteratorObject=i})),Ye=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillFormData=void 0,exports.getStreamFromFormData=a;let t=p(`node:buffer`),n=Je(),r=U();var i=class{map=new Map;append(e,t,n){let r=this.map.get(e);r||(r=[],this.map.set(e,r));let i=s(t)?o(e,t,n):t;r.push(i)}delete(e){this.map.delete(e)}get(e){let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.map.get(e)||[]}has(e){return this.map.has(e)}set(e,t,n){let r=s(t)?o(e,t,n):t;this.map.set(e,[r])}[Symbol.iterator](){return this._entries()}*_entries(){for(let[e,t]of this.map)for(let n of t)yield[e,n]}entries(){return new n.PonyfillIteratorObject(this._entries(),`FormDataIterator`)}_keys(){return this.map.keys()}keys(){return new n.PonyfillIteratorObject(this._keys(),`FormDataIterator`)}*_values(){for(let e of this.map.values())for(let t of e)yield t}values(){return new n.PonyfillIteratorObject(this._values(),`FormDataIterator`)}forEach(e){for(let[t,n]of this)e(n,t,this)}};exports.PonyfillFormData=i;function a(e,n=`---`){let i,a=!1,o,s=!1;function c(e){let{done:r,value:a}=i.next();if(r)return e.enqueue(t.Buffer.from(`\r\n--${n}--\r\n`)),e.close();if(s&&e.enqueue(t.Buffer.from(`\r\n--${n}\r\n`)),a){let[n,r]=a;if(typeof r==`string`)e.enqueue(t.Buffer.from(`Content-Disposition: form-data; name="${n}"\r\n\r\n`)),e.enqueue(t.Buffer.from(r));else{let i=``;r.name&&(i=`; filename="${r.name}"`),e.enqueue(t.Buffer.from(`Content-Disposition: form-data; name="${n}"${i}\r\n`)),e.enqueue(t.Buffer.from(`Content-Type: ${r.type||`application/octet-stream`}\r\n\r\n`));let a=r.stream();o=a[Symbol.asyncIterator]()}s=!0}}return new r.PonyfillReadableStream({start:()=>{i=e.entries()},pull:e=>a?o?o.next().then(({done:t,value:n})=>(t&&(o=void 0),n?e.enqueue(n):c(e))):c(e):(a=!0,e.enqueue(t.Buffer.from(`--${n}\r\n`))),cancel:e=>{i?.return?.(e),o?.return?.(e)}})}function o(e,t,n){return Object.defineProperty(t,`name`,{configurable:!0,enumerable:!0,value:n||t.name||e}),t}function s(e){return e?.arrayBuffer!=null}})),Xe=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillBody=void 0;let t=p(`node:buffer`),n=p(`node:stream`),r=ce(),i=R(),a=W(),o=G(),s=Ye(),c=U(),l=H();var u;(function(e){e.ReadableStream=`ReadableStream`,e.Blob=`Blob`,e.FormData=`FormData`,e.String=`String`,e.Readable=`Readable`,e.Buffer=`Buffer`,e.AsyncIterable=`AsyncIterable`})(u||={});var d=class{bodyInit;options;bodyUsed=!1;contentType=null;contentLength=null;constructor(e,t={}){this.bodyInit=e,this.options=t;let{bodyFactory:n,contentType:r,contentLength:i,bodyType:a,buffer:o}=f(e);this._bodyFactory=n,this.contentType=r,this.contentLength=i,this.bodyType=a,this._buffer=o,this._signal=t.signal}bodyType;_bodyFactory=()=>null;_generatedBody=null;_buffer;_signal;generateBody(){if(this._generatedBody?.readable?.destroyed&&this._buffer&&(this._generatedBody.readable=n.Readable.from(this._buffer)),this._generatedBody)return this._generatedBody;let e=this._bodyFactory();return this._generatedBody=e,e}handleContentLengthHeader(e=!1){let t=this.headers.get(`content-type`);t?this.contentType=t:this.contentType&&this.headers.set(`content-type`,this.contentType);let n=this.headers.get(`content-length`);e&&this.bodyInit==null&&!n&&(this.contentLength=0,this.headers.set(`content-length`,`0`)),n?this.contentLength=parseInt(n,10):this.contentLength&&this.headers.set(`content-length`,this.contentLength.toString())}get body(){let e=this.generateBody();if(e!=null){let t=e,n=e.readable;return new Proxy(e.readable,{get(e,r){if(r in t){let e=t[r];return typeof e==`function`?e.bind(t):e}if(r in n){let e=n[r];return typeof e==`function`?e.bind(n):e}}})}return null}_chunks=null;_doCollectChunksFromReadableJob(){if(this.bodyType===u.AsyncIterable){if(Array.fromAsync)return(0,i.handleMaybePromise)(()=>Array.fromAsync(this.bodyInit),e=>(this._chunks=e,this._chunks));let e=this.bodyInit[Symbol.asyncIterator](),t=[],n=()=>(0,i.handleMaybePromise)(()=>e.next(),({value:e,done:r})=>(e&&t.push(e),r?(this._chunks=t,this._chunks):n()));return n()}let e=this.generateBody();if(!e)return this._chunks=[],(0,l.fakePromise)(this._chunks);if(e.readable.destroyed)return(0,l.fakePromise)(this._chunks=[]);let t=[];return new Promise((n,r)=>{e.readable.on(`data`,e=>{t.push(e)}),e.readable.once(`error`,r),e.readable.once(`end`,()=>{n(this._chunks=t)})})}_collectChunksFromReadable(){return this._chunks?(0,l.fakePromise)(this._chunks):(this._chunks||=this._doCollectChunksFromReadableJob(),this._chunks)}_blob=null;blob(){return this._blob?(0,l.fakePromise)(this._blob):(this.bodyType===u.String&&(this._text=this.bodyInit,this._blob=new a.PonyfillBlob([this._text],{type:this.contentType||`text/plain;charset=UTF-8`,size:this.contentLength})),this.bodyType===u.Blob?(this._blob=this.bodyInit,(0,l.fakePromise)(this._blob)):this._buffer?(this._blob=new a.PonyfillBlob([this._buffer],{type:this.contentType||``,size:this.contentLength}),(0,l.fakePromise)(this._blob)):(0,l.fakePromise)((0,i.handleMaybePromise)(()=>this._collectChunksFromReadable(),e=>(this._blob=new a.PonyfillBlob(e,{type:this.contentType||``,size:this.contentLength}),this._blob))))}_formData=null;formData(e){if(this._formData)return(0,l.fakePromise)(this._formData);if(this.bodyType===u.FormData)return this._formData=this.bodyInit,(0,l.fakePromise)(this._formData);this._formData=new s.PonyfillFormData;let t=this.generateBody();if(t==null)return(0,l.fakePromise)(this._formData);let i={...this.options.formDataLimits,...e?.formDataLimits};return new Promise((e,t)=>{let a=this.body?.readable;if(!a)return t(Error(`No stream available`));let s=null,c=new r.Busboy({headers:{"content-length":typeof this.contentLength==`number`?this.contentLength.toString():this.contentLength||``,"content-type":this.contentType||``},limits:i,defCharset:`utf-8`});this._signal&&(0,n.addAbortSignal)(this._signal,c);let l=!1,u=n=>{l||(l=!0,a.unpipe(c),c.destroy(),s&&=(s.destroy(),null),n?t(n):e(this._formData))};a.on(`error`,u),c.on(`field`,(e,t,n,r)=>{if(n)return u(Error(`Field name size exceeded: ${i?.fieldNameSize} bytes`));if(r)return u(Error(`Field value size exceeded: ${i?.fieldSize} bytes`));this._formData.set(e,t)}),c.on(`file`,(e,t,n,r,a)=>{s=t;let c=[];t.on(`data`,e=>{c.push(e)}),t.on(`error`,u),t.on(`limit`,()=>{u(Error(`File size limit exceeded: ${i?.fileSize} bytes`))}),t.on(`close`,()=>{t.truncated&&u(Error(`File size limit exceeded: ${i?.fileSize} bytes`)),s=null;let r=new o.PonyfillFile(c,n,{type:a});this._formData.set(e,r)})}),c.on(`fieldsLimit`,()=>{u(Error(`Fields limit exceeded: ${i?.fields}`))}),c.on(`filesLimit`,()=>{u(Error(`Files limit exceeded: ${i?.files}`))}),c.on(`partsLimit`,()=>{u(Error(`Parts limit exceeded: ${i?.parts}`))}),c.on(`end`,u),c.on(`finish`,u),c.on(`close`,u),c.on(`error`,u),a.pipe(c)})}buffer(){if(this._buffer)return(0,l.fakePromise)(this._buffer);if(this._text)return this._buffer=t.Buffer.from(this._text,`utf-8`),(0,l.fakePromise)(this._buffer);if(this.bodyType===u.String)return this.text().then(e=>(this._text=e,this._buffer=t.Buffer.from(e,`utf-8`),this._buffer));if(this.bodyType===u.Blob){if((0,a.hasBufferMethod)(this.bodyInit))return this.bodyInit.buffer().then(e=>(this._buffer=e,this._buffer));if((0,a.hasBytesMethod)(this.bodyInit))return this.bodyInit.bytes().then(e=>(this._buffer=t.Buffer.from(e),this._buffer));if((0,a.hasArrayBufferMethod)(this.bodyInit))return this.bodyInit.arrayBuffer().then(e=>(this._buffer=t.Buffer.from(e,void 0,e.byteLength),this._buffer))}return(0,l.fakePromise)((0,i.handleMaybePromise)(()=>this._collectChunksFromReadable(),e=>e.length===1?(this._buffer=e[0],this._buffer):(this._buffer=t.Buffer.concat(e),this._buffer)))}bytes(){return this.buffer()}arrayBuffer(){return this.buffer()}_json=null;json(){return this._json?(0,l.fakePromise)(this._json):this.text().then(e=>{try{this._json=JSON.parse(e)}catch(t){throw t instanceof SyntaxError&&(t.message+=`, "${e}" is not valid JSON`),t}return this._json})}_text=null;text(){return this._text?(0,l.fakePromise)(this._text):this.bodyType===u.String?(this._text=this.bodyInit,(0,l.fakePromise)(this._text)):this.buffer().then(e=>(this._text=e.toString(`utf-8`),this._text))}};exports.PonyfillBody=d;function f(e){if(e==null)return{bodyFactory:()=>null,contentType:null,contentLength:null};if(typeof e==`string`){let r=t.Buffer.byteLength(e);return{bodyType:u.String,contentType:`text/plain;charset=UTF-8`,contentLength:r,bodyFactory(){let r=n.Readable.from(t.Buffer.from(e,`utf-8`));return new c.PonyfillReadableStream(r)}}}if(t.Buffer.isBuffer(e)){let t=e;return{bodyType:u.Buffer,contentType:null,contentLength:e.length,buffer:e,bodyFactory(){let e=n.Readable.from(t),r=new c.PonyfillReadableStream(e);return r}}}if((0,l.isArrayBufferView)(e)){let r=t.Buffer.from(e.buffer,e.byteOffset,e.byteLength);return{bodyType:u.Buffer,contentLength:e.byteLength,contentType:null,buffer:r,bodyFactory(){let e=n.Readable.from(r),t=new c.PonyfillReadableStream(e);return t}}}if(e instanceof c.PonyfillReadableStream&&e.readable!=null){let t=e;return{bodyType:u.ReadableStream,bodyFactory:()=>t,contentType:null,contentLength:null}}if(h(e)){let t=e;return{bodyType:u.Blob,contentType:e.type,contentLength:e.size,bodyFactory(){return t.stream()}}}if(e instanceof ArrayBuffer){let r=e.byteLength,i=t.Buffer.from(e,void 0,e.byteLength);return{bodyType:u.Buffer,contentType:null,contentLength:r,buffer:i,bodyFactory(){let e=n.Readable.from(i),t=new c.PonyfillReadableStream(e);return t}}}if(e instanceof n.Readable)return{bodyType:u.Readable,contentType:null,contentLength:null,bodyFactory(){let t=new c.PonyfillReadableStream(e);return t}};if(g(e))return{bodyType:u.String,contentType:`application/x-www-form-urlencoded;charset=UTF-8`,contentLength:null,bodyFactory(){let t=new c.PonyfillReadableStream(n.Readable.from(e.toString()));return t}};if(m(e)){let t=Math.random().toString(36).substr(2),n=`multipart/form-data; boundary=${t}`;return{bodyType:u.FormData,contentType:n,contentLength:null,bodyFactory(){return(0,s.getStreamFromFormData)(e,t)}}}if(_(e))return{contentType:null,contentLength:null,bodyFactory(){return new c.PonyfillReadableStream(e)}};if(e[Symbol.iterator]||e[Symbol.asyncIterator])return{contentType:null,contentLength:null,bodyType:u.AsyncIterable,bodyFactory(){let t=n.Readable.from(e);return new c.PonyfillReadableStream(t)}};throw Error(`Unknown body type`)}function m(e){return e?.forEach!=null}function h(e){return e?.stream!=null&&typeof e.stream==`function`}function g(e){return e?.sort!=null}function _(e){return e?.getReader!=null}})),Ze=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillHeaders=void 0,exports.isHeadersLike=r;let t=p(`node:util`),n=Je();function r(e){return e?.get&&e?.forEach}var i=class{headersInit;_map;objectNormalizedKeysOfHeadersInit=[];objectOriginalKeysOfHeadersInit=[];_setCookies;constructor(e){this.headersInit=e}_get(e){let t=e.toLowerCase();if(t===`set-cookie`&&this._setCookies?.length)return this._setCookies.join(`, `);if(this._map)return this._map.get(t)||null;if(this.headersInit==null)return null;if(Array.isArray(this.headersInit)){let e=this.headersInit.filter(([e])=>e.toLowerCase()===t);return e.length===0?null:e.length===1?e[0][1]:e.map(([,e])=>e).join(`, `)}else if(r(this.headersInit))return this.headersInit.get(t);else{let n=this.headersInit[e]||this.headersInit[t];if(n!=null)return n;this.objectNormalizedKeysOfHeadersInit.length||Object.keys(this.headersInit).forEach(e=>{this.objectOriginalKeysOfHeadersInit.push(e),this.objectNormalizedKeysOfHeadersInit.push(e.toLowerCase())});let r=this.objectNormalizedKeysOfHeadersInit.indexOf(t);if(r===-1)return null;let i=this.objectOriginalKeysOfHeadersInit[r];return this.headersInit[i]}}getMap(){if(!this._map)if(this._setCookies||=[],this.headersInit!=null)if(Array.isArray(this.headersInit)){this._map=new Map;for(let[e,t]of this.headersInit){let n=e.toLowerCase();if(n===`set-cookie`){this._setCookies.push(t);continue}this._map.set(n,t)}}else if(r(this.headersInit))this._map=new Map,this.headersInit.forEach((e,t)=>{if(t===`set-cookie`){this._setCookies||=[],this._setCookies.push(e);return}this._map.set(t,e)});else for(let e in this._map=new Map,this.headersInit){let t=this.headersInit[e];if(t!=null){let n=e.toLowerCase();if(n===`set-cookie`){this._setCookies||=[],this._setCookies.push(t);continue}this._map.set(n,t)}}else this._map=new Map;return this._map}append(e,t){let n=e.toLowerCase();if(n===`set-cookie`){this._setCookies||=[],this._setCookies.push(t);return}let r=this.getMap().get(n),i=r?`${r}, ${t}`:t;this.getMap().set(n,i)}get(e){let t=this._get(e);return t==null?null:t.toString()}has(e){let t=e.toLowerCase();return t===`set-cookie`?!!this._setCookies?.length:!!this._get(e)}set(e,t){let n=e.toLowerCase();if(n===`set-cookie`){this._setCookies=[t];return}if(!this._map&&this.headersInit!=null)if(Array.isArray(this.headersInit)){let e=this.headersInit.find(([e])=>e.toLowerCase()===n);e?e[1]=t:this.headersInit.push([n,t]);return}else if(r(this.headersInit)){this.headersInit.set(n,t);return}else{this.headersInit[n]=t;return}this.getMap().set(n,t)}delete(e){let t=e.toLowerCase();if(t===`set-cookie`){this._setCookies=[];return}this.getMap().delete(t)}forEach(e){if(this._setCookies?.forEach(t=>{e(t,`set-cookie`,this)}),!this._map){if(this.headersInit){if(Array.isArray(this.headersInit)){this.headersInit.forEach(([t,n])=>{e(n,t,this)});return}if(r(this.headersInit)){this.headersInit.forEach(e);return}Object.entries(this.headersInit).forEach(([t,n])=>{n!=null&&e(n,t,this)})}return}this.getMap().forEach((t,n)=>{e(t,n,this)})}*_keys(){if(this._setCookies?.length&&(yield`set-cookie`),!this._map&&this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([e])=>e)[Symbol.iterator]();return}if(r(this.headersInit)){yield*this.headersInit.keys();return}yield*Object.keys(this.headersInit)[Symbol.iterator]();return}yield*this.getMap().keys()}keys(){return new n.PonyfillIteratorObject(this._keys(),`HeadersIterator`)}*_values(){if(this._setCookies?.length&&(yield*this._setCookies),!this._map&&this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit.map(([,e])=>e)[Symbol.iterator]();return}if(r(this.headersInit)){yield*this.headersInit.values();return}yield*Object.values(this.headersInit)[Symbol.iterator]();return}yield*this.getMap().values()}values(){return new n.PonyfillIteratorObject(this._values(),`HeadersIterator`)}*_entries(){if(this._setCookies?.length&&(yield*this._setCookies.map(e=>[`set-cookie`,e])),!this._map&&this.headersInit){if(Array.isArray(this.headersInit)){yield*this.headersInit;return}if(r(this.headersInit)){yield*this.headersInit.entries();return}yield*Object.entries(this.headersInit);return}yield*this.getMap().entries()}entries(){return new n.PonyfillIteratorObject(this._entries(),`HeadersIterator`)}getSetCookie(){return this._setCookies||this.getMap(),this._setCookies}[Symbol.iterator](){return this.entries()}[Symbol.for(`nodejs.util.inspect.custom`)](){let e={};return this.forEach((t,n)=>{n===`set-cookie`?e[`set-cookie`]=this._setCookies||[]:e[n]=t?.includes(`,`)?t.split(`,`).map(e=>e.trim()):t}),`Headers ${(0,t.inspect)(e)}`}};exports.PonyfillHeaders=i})),Qe=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillResponse=void 0;let t=p(`node:http`),n=Xe(),r=Ze(),i=`application/json; charset=utf-8`;var a=class e extends n.PonyfillBody{headers;constructor(e,n){super(e||null,n),this.headers=n?.headers&&(0,r.isHeadersLike)(n.headers)?n.headers:new r.PonyfillHeaders(n?.headers),this.status=n?.status||200,this.statusText=n?.statusText||t.STATUS_CODES[this.status]||`OK`,this.url=n?.url||``,this.redirected=n?.redirected||!1,this.type=n?.type||`default`,this.handleContentLengthHeader()}get ok(){return this.status>=200&&this.status<300}status;statusText;url;redirected;type;clone(){return this}static error(){return new e(null,{status:500,statusText:`Internal Server Error`})}static redirect(t,n=302){if(n<300||n>399)throw RangeError(`Invalid status code`);return new e(null,{headers:{location:t},status:n})}static json(t,n){let a=JSON.stringify(t);if(!n)n={headers:{"content-type":i,"content-length":Buffer.byteLength(a).toString()}};else if(!n.headers)n.headers={"content-type":i,"content-length":Buffer.byteLength(a).toString()};else if((0,r.isHeadersLike)(n.headers))n.headers.has(`content-type`)||n.headers.set(`content-type`,i),n.headers.has(`content-length`)||n.headers.set(`content-length`,Buffer.byteLength(a).toString());else if(Array.isArray(n.headers)){let e=!1,t=!1;for(let[r]of n.headers){if(t&&e)break;!e&&r.toLowerCase()===`content-type`?e=!0:!t&&r.toLowerCase()===`content-length`&&(t=!0)}e||n.headers.push([`content-type`,i]),t||n.headers.push([`content-length`,Buffer.byteLength(a).toString()])}else typeof n.headers==`object`&&(n.headers?.[`content-type`]??(n.headers[`content-type`]=i),n.headers?.[`content-length`]??(n.headers[`content-length`]=Buffer.byteLength(a).toString()));return new e(a,n)}[Symbol.toStringTag]=`Response`};exports.PonyfillResponse=a})),$e=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.fetchCurl=o;let t=p(`node:stream`),n=p(`node:tls`),r=R(),i=Qe(),a=H();function o(e){let{Curl:o,CurlFeature:s,CurlPause:c,CurlProgressFunc:l}=globalThis.libcurl,u=new o;u.enable(s.NoDataParsing),u.setOpt(`URL`,e.url),process.env.NODE_TLS_REJECT_UNAUTHORIZED===`0`&&u.setOpt(`SSL_VERIFYPEER`,!1),process.env.NODE_EXTRA_CA_CERTS?u.setOpt(`CAINFO`,process.env.NODE_EXTRA_CA_CERTS):u.setOpt(`CAINFO_BLOB`,n.rootCertificates.join(`
`)),u.enable(s.StreamResponse);let d;if(e._signal===null?d=void 0:e._signal&&(d=e._signal),u.setStreamProgressCallback(function(){return d?.aborted?process.env.DEBUG?l.Continue:1:0}),e.bodyType===`String`)u.setOpt(`POSTFIELDS`,e.bodyInit);else{let n=e.body==null?null:(0,a.isNodeReadable)(e.body)?e.body:t.Readable.from(e.body);n&&(u.setOpt(`UPLOAD`,!0),u.setUploadStream(n))}process.env.DEBUG&&u.setOpt(`VERBOSE`,!0),u.setOpt(`TRANSFER_ENCODING`,!1),u.setOpt(`HTTP_TRANSFER_DECODING`,!0),u.setOpt(`FOLLOWLOCATION`,e.redirect===`follow`),u.setOpt(`MAXREDIRS`,20),u.setOpt(`ACCEPT_ENCODING`,``),u.setOpt(`CUSTOMREQUEST`,e.method);let f=e.headersSerializer||a.defaultHeadersSerializer,p,m=f(e.headers,e=>{p=Number(e)});p!=null&&u.setOpt(`INFILESIZE`,p),u.setOpt(`HTTPHEADER`,m),u.enable(s.NoHeaderParsing);let h=(0,r.createDeferredPromise)(),g;function _(){if(u.isOpen)try{u.pause(c.Recv)}catch(e){h.reject(e)}}return d?.addEventListener(`abort`,_,{once:!0}),u.once(`end`,function(){try{u.close()}catch(e){h.reject(e)}d?.removeEventListener(`abort`,_)}),u.once(`error`,function(e){g&&!g.closed&&!g.destroyed?g.destroy(e):(e.message===`Operation was aborted by an application callback`&&(e.message=`The operation was aborted.`),h.reject(e));try{u.close()}catch(e){h.reject(e)}}),u.once(`stream`,function(n,r,s){let c=n.pipe(new t.PassThrough,{end:!0}),l=s.toString(`utf8`).split(/\r?\n|\r/g).filter(t=>t&&!t.startsWith(`HTTP/`)?(e.redirect===`error`&&t.toLowerCase().includes(`location`)&&(0,a.shouldRedirect)(r)&&(n.destroyed||n.resume(),c.destroy(),h.reject(Error(`redirect is not allowed`))),!0):!1),d=l.map(e=>e.split(/:\s(.+)/).slice(0,2)),f=new i.PonyfillResponse(c,{status:r,headers:d,url:u.getInfo(o.info.REDIRECT_URL)?.toString()||e.url,redirected:Number(u.getInfo(o.info.REDIRECT_COUNT))>0});h.resolve(f),g=c}),setImmediate(()=>{u.perform()}),h.promise}})),et=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillURL=void 0;let t=(Ve(),f(K)),n=t.__importDefault(p(`node:buffer`)),r=p(`node:crypto`),i=globalThis.URL;var a=class extends i{static blobRegistry=new Map;static createObjectURL(e){let t=`blob:whatwgnode:${(0,r.randomUUID)()}`;return this.blobRegistry.set(t,e),t}static revokeObjectURL(e){this.blobRegistry.has(e)?this.blobRegistry.delete(e):i.revokeObjectURL(e)}static getBlobFromURL(e){return this.blobRegistry.get(e)||n.default?.resolveObjectURL?.(e)}};exports.PonyfillURL=a})),tt=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillRequest=void 0;let t=p(`node:http`),n=p(`node:https`),r=Xe(),i=Ze(),a=et();function o(e){return e[Symbol.toStringTag]===`Request`}function s(e){return e?.href!=null}var c=class extends r.PonyfillBody{constructor(e,r){let a,c,l=null,u;if(typeof e==`string`?a=e:s(e)?c=e:o(e)&&(e._parsedUrl?c=e._parsedUrl:a=e._url?e._url:e.url,l=e.body,u=e),r!=null&&(l=r.body||null,u=r),super(l,u),this._url=a,this._parsedUrl=c,this.cache=u?.cache||`default`,this.credentials=u?.credentials||`same-origin`,this.headers=u?.headers&&(0,i.isHeadersLike)(u.headers)?u.headers:new i.PonyfillHeaders(u?.headers),this.integrity=u?.integrity||``,this.keepalive=u?.keepalive==null?!1:u?.keepalive,this.method=u?.method?.toUpperCase()||`GET`,this.mode=u?.mode||`cors`,this.redirect=u?.redirect||`follow`,this.referrer=u?.referrer||`about:client`,this.referrerPolicy=u?.referrerPolicy||`no-referrer`,this.headersSerializer=u?.headersSerializer,this.duplex=u?.duplex||`half`,this.destination=`document`,this.priority=`auto`,this.method!==`GET`&&this.method!==`HEAD`&&this.handleContentLengthHeader(!0),u?.agent!=null){let e=c?.protocol||a||this.url;u.agent===!1?this.agent=!1:(e.startsWith(`http:`)&&u.agent instanceof t.Agent||e.startsWith(`https:`)&&u.agent instanceof n.Agent)&&(this.agent=u.agent)}}headersSerializer;cache;credentials;destination;headers;integrity;keepalive;method;mode;priority;redirect;referrer;referrerPolicy;_url;get signal(){return this._signal||=new AbortController().signal,this._signal}get url(){if(this._url==null)if(this._parsedUrl)this._url=this._parsedUrl.toString();else throw TypeError(`Invalid URL`);return this._url}_parsedUrl;get parsedUrl(){if(this._parsedUrl==null)if(this._url!=null)this._parsedUrl=new a.PonyfillURL(this._url,`http://localhost`);else throw TypeError(`Invalid URL`);return this._parsedUrl}duplex;agent;clone(){return this}[Symbol.toStringTag]=`Request`};exports.PonyfillRequest=c})),nt=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.fetchNodeHttp=d;let t=p(`node:http`),n=p(`node:https`),r=p(`node:stream`),i=p(`node:zlib`),a=R(),o=tt(),s=Qe(),c=et(),l=H();function u(e){if(e.startsWith(`http:`))return t.request;if(e.startsWith(`https:`))return n.request;throw Error(`Unsupported protocol: ${e.split(`:`)[0]||e}`)}function d(e){return new Promise((n,f)=>{try{let p=u(e.parsedUrl?.protocol||e.url),m=e.headersSerializer||l.getHeadersObj,h=m(e.headers);h[`accept-encoding`]??=`gzip, deflate, br`;let g;e._signal==null?g=void 0:e._signal&&(g=e._signal);let _;if(_=e.parsedUrl?p(e.parsedUrl,{method:e.method,headers:h,signal:g,agent:e.agent}):p(e.url,{method:e.method,headers:h,signal:g,agent:e.agent}),_.once(`error`,f),_.once(`response`,a=>{let u,p=a.headers[`content-encoding`];switch(p){case`x-gzip`:case`gzip`:u=(0,i.createGunzip)();break;case`x-deflate`:case`deflate`:u=(0,i.createInflate)();break;case`x-deflate-raw`:case`deflate-raw`:u=(0,i.createInflateRaw)();break;case`br`:u=(0,i.createBrotliDecompress)();break}if(a.headers.location&&(0,l.shouldRedirect)(a.statusCode)){if(e.redirect===`error`){let e=Error(`Redirects are not allowed`);f(e),a.resume();return}if(e.redirect===`follow`){let t=new c.PonyfillURL(a.headers.location,e.parsedUrl||e.url),r=d(new o.PonyfillRequest(t,e));n(r.then(e=>(e.redirected=!0,e))),a.resume();return}}u||=new r.PassThrough,(0,l.pipeThrough)({src:a,dest:u,signal:g,onError:e=>{a.destroyed||a.destroy(e),u.destroyed||u.destroy(e),f(e)}});let m=a.statusCode||200,h=a.statusMessage||t.STATUS_CODES[m];h??=``;let _=new s.PonyfillResponse(u||a,{status:m,statusText:h,headers:a.headers,url:e.url,signal:g});n(_)}),e._buffer!=null)(0,a.handleMaybePromise)(()=>(0,l.safeWrite)(e._buffer,_),()=>(0,l.endStream)(_),f);else{let t=e.body==null?null:(0,l.isNodeReadable)(e.body)?e.body:r.Readable.from(e.body);t?t.pipe(_):(0,l.endStream)(_)}}catch(e){f(e)}})}})),rt=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.fetchPonyfill=h;let t=p(`node:buffer`),n=p(`node:fs`),r=p(`node:url`),i=$e(),a=nt(),o=tt(),s=Qe(),c=et(),l=H();async function u(e){let t=(0,r.fileURLToPath)(e);try{await n.promises.access(t,n.promises.constants.R_OK);let e=await n.promises.stat(t,{bigint:!0}),r=(0,n.createReadStream)(t);return new s.PonyfillResponse(r,{status:200,statusText:`OK`,headers:{"content-type":`application/octet-stream`,"last-modified":e.mtime.toUTCString()}})}catch(e){if(e.code===`ENOENT`)return new s.PonyfillResponse(null,{status:404,statusText:`Not Found`});if(e.code===`EACCES`)return new s.PonyfillResponse(null,{status:403,statusText:`Forbidden`});throw e}}function d(e){let[n=`text/plain`,...r]=e.substring(5).split(`,`),i=decodeURIComponent(r.join(`,`));if(n.endsWith(`;base64`)){let e=t.Buffer.from(i,`base64url`),r=n.slice(0,-7);return new s.PonyfillResponse(e,{status:200,statusText:`OK`,headers:{"content-type":r}})}return new s.PonyfillResponse(i,{status:200,statusText:`OK`,headers:{"content-type":n}})}function f(e){let t=c.PonyfillURL.getBlobFromURL(e);if(!t)throw TypeError(`Invalid Blob URL`);return new s.PonyfillResponse(t,{status:200,headers:{"content-type":t.type,"content-length":t.size.toString()}})}function m(e){return e!=null&&e.href!=null}function h(e,t){if(typeof e==`string`||m(e)){let n=new o.PonyfillRequest(e,t);return h(n)}let n=e;if(n.url.startsWith(`data:`)){let e=d(n.url);return(0,l.fakePromise)(e)}if(n.url.startsWith(`file:`)){let e=u(n.url);return e}if(n.url.startsWith(`blob:`)){let e=f(n.url);return(0,l.fakePromise)(e)}return globalThis.libcurl&&!n.agent?(0,i.fetchCurl)(n):(0,a.fetchNodeHttp)(n)}})),it=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillTextDecoder=exports.PonyfillTextEncoder=void 0,exports.PonyfillBtoa=a;let t=p(`node:buffer`),n=H();var r=class{encoding;constructor(e=`utf-8`){this.encoding=e}encode(e){return t.Buffer.from(e,this.encoding)}encodeInto(e,t){let n=this.encode(e),r=n.copy(t);return{read:r,written:r}}};exports.PonyfillTextEncoder=r;var i=class{encoding;fatal=!1;ignoreBOM=!1;constructor(e=`utf-8`,t){this.encoding=e,t&&(this.fatal=t.fatal||!1,this.ignoreBOM=t.ignoreBOM||!1)}decode(e){return t.Buffer.isBuffer(e)?e.toString(this.encoding):(0,n.isArrayBufferView)(e)?t.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString(this.encoding):t.Buffer.from(e).toString(this.encoding)}};exports.PonyfillTextDecoder=i;function a(e){return t.Buffer.from(e,`binary`).toString(`base64`)}})),at=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillURLSearchParams=void 0,exports.PonyfillURLSearchParams=globalThis.URLSearchParams})),ot=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillWritableStream=void 0;let t=p(`node:events`),n=p(`node:stream`),r=R(),i=H();var a=class{writable;constructor(e){if(e instanceof n.Writable)this.writable=e;else if(e){let t=new n.Writable({write(t,n,r){try{let n=e.write?.(t,i);n instanceof Promise?n.then(()=>{r()},e=>{r(e)}):r()}catch(e){r(e)}},final(t){let n=e.close?.();n instanceof Promise?n.then(()=>{t()},e=>{t(e)}):t()}});this.writable=t;let r=new AbortController,i={signal:r.signal,error(e){t.destroy(e)}};t.once(`error`,e=>r.abort(e)),t.once(`close`,()=>r.abort())}else this.writable=new n.Writable}getWriter(){let e=this.writable;return{get closed(){return(0,t.once)(e,`close`)},get desiredSize(){return e.writableLength},get ready(){return(0,t.once)(e,`drain`)},releaseLock(){},write(t){let n=(0,i.fakePromise)();return t==null?n:n.then(()=>(0,i.safeWrite)(t,e))},close(){return!e.errored&&e.closed?(0,i.fakePromise)():e.errored?(0,r.fakeRejectPromise)(e.errored):(0,i.fakePromise)().then(()=>(0,i.endStream)(e))},abort(n){return e.destroy(n),(0,t.once)(e,`close`)}}}close(){return!this.writable.errored&&this.writable.closed?(0,i.fakePromise)():this.writable.errored?(0,r.fakeRejectPromise)(this.writable.errored):(0,i.fakePromise)().then(()=>(0,i.endStream)(this.writable))}abort(e){return this.writable.destroy(e),(0,t.once)(this.writable,`close`)}locked=!1};exports.PonyfillWritableStream=a})),st=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillTransformStream=void 0;let t=p(`node:stream`),n=U(),r=H(),i=ot();var a=class{transform;writable;readable;constructor(e){if(e instanceof t.Transform)this.transform=e;else if(e){let n={enqueue(e){i.push(e)},error(e){i.destroy(e)},terminate(){(0,r.endStream)(i)},get desiredSize(){return i.writableLength}},i=new t.Transform({read(){},write(t,r,i){try{let r=e.transform?.(t,n);r instanceof Promise?r.then(()=>{i()},e=>{i(e)}):i()}catch(e){i(e)}},final(t){try{let r=e.flush?.(n);r instanceof Promise?r.then(()=>{t()},e=>{t(e)}):t()}catch(e){t(e)}}});this.transform=i}else this.transform=new t.Transform;this.writable=new i.PonyfillWritableStream(this.transform),this.readable=new n.PonyfillReadableStream(this.transform)}};exports.PonyfillTransformStream=a})),ct=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillCompressionStream=void 0;let t=p(`node:zlib`),n=st();var r=class extends n.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith(`v2`)?[`gzip`,`deflate`,`br`]:[`gzip`,`deflate`,`deflate-raw`,`br`];constructor(e){switch(e){case`x-gzip`:case`gzip`:super((0,t.createGzip)());break;case`x-deflate`:case`deflate`:super((0,t.createDeflate)());break;case`deflate-raw`:super((0,t.createDeflateRaw)());break;case`br`:super((0,t.createBrotliCompress)());break;default:throw Error(`Unsupported compression format: ${e}`)}}};exports.PonyfillCompressionStream=r})),lt=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillDecompressionStream=void 0;let t=p(`node:zlib`),n=st();var r=class extends n.PonyfillTransformStream{static supportedFormats=globalThis.process?.version?.startsWith(`v2`)?[`gzip`,`deflate`,`br`]:[`gzip`,`deflate`,`deflate-raw`,`br`];constructor(e){switch(e){case`x-gzip`:case`gzip`:super((0,t.createGunzip)());break;case`x-deflate`:case`deflate`:super((0,t.createInflate)());break;case`deflate-raw`:super((0,t.createInflateRaw)());break;case`br`:super((0,t.createBrotliDecompress)());break;default:throw TypeError(`Unsupported compression format: '${e}'`)}}};exports.PonyfillDecompressionStream=r})),ut=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.PonyfillTextEncoderStream=exports.PonyfillTextDecoderStream=void 0;let t=it(),n=st();var r=class extends n.PonyfillTransformStream{textDecoder;constructor(e,n){super({transform:(e,t)=>t.enqueue(this.textDecoder.decode(e,{stream:!0}))}),this.textDecoder=new t.PonyfillTextDecoder(e,n)}get encoding(){return this.textDecoder.encoding}get fatal(){return this.textDecoder.fatal}get ignoreBOM(){return this.textDecoder.ignoreBOM}};exports.PonyfillTextDecoderStream=r;var i=class extends n.PonyfillTransformStream{textEncoder;constructor(e){super({transform:(e,t)=>t.enqueue(this.textEncoder.encode(e))}),this.textEncoder=new t.PonyfillTextEncoder(e)}get encoding(){return this.textEncoder.encoding}encode(e){return this.textEncoder.encode(e)}};exports.PonyfillTextEncoderStream=i})),dt=c((exports=>{Object.defineProperty(exports,`__esModule`,{value:!0}),exports.TextEncoderStream=exports.TextDecoderStream=exports.IteratorObject=exports.DecompressionStream=exports.CompressionStream=exports.TransformStream=exports.WritableStream=exports.URLSearchParams=exports.URL=exports.btoa=exports.TextDecoder=exports.TextEncoder=exports.Blob=exports.FormData=exports.File=exports.ReadableStream=exports.Response=exports.Request=exports.Body=exports.Headers=exports.fetch=void 0;var t=rt();Object.defineProperty(exports,`fetch`,{enumerable:!0,get:function(){return t.fetchPonyfill}});var n=Ze();Object.defineProperty(exports,`Headers`,{enumerable:!0,get:function(){return n.PonyfillHeaders}});var r=Xe();Object.defineProperty(exports,`Body`,{enumerable:!0,get:function(){return r.PonyfillBody}});var i=tt();Object.defineProperty(exports,`Request`,{enumerable:!0,get:function(){return i.PonyfillRequest}});var a=Qe();Object.defineProperty(exports,`Response`,{enumerable:!0,get:function(){return a.PonyfillResponse}});var o=U();Object.defineProperty(exports,`ReadableStream`,{enumerable:!0,get:function(){return o.PonyfillReadableStream}});var s=G();Object.defineProperty(exports,`File`,{enumerable:!0,get:function(){return s.PonyfillFile}});var c=Ye();Object.defineProperty(exports,`FormData`,{enumerable:!0,get:function(){return c.PonyfillFormData}});var l=W();Object.defineProperty(exports,`Blob`,{enumerable:!0,get:function(){return l.PonyfillBlob}});var u=it();Object.defineProperty(exports,`TextEncoder`,{enumerable:!0,get:function(){return u.PonyfillTextEncoder}}),Object.defineProperty(exports,`TextDecoder`,{enumerable:!0,get:function(){return u.PonyfillTextDecoder}}),Object.defineProperty(exports,`btoa`,{enumerable:!0,get:function(){return u.PonyfillBtoa}});var d=et();Object.defineProperty(exports,`URL`,{enumerable:!0,get:function(){return d.PonyfillURL}});var f=at();Object.defineProperty(exports,`URLSearchParams`,{enumerable:!0,get:function(){return f.PonyfillURLSearchParams}});var p=ot();Object.defineProperty(exports,`WritableStream`,{enumerable:!0,get:function(){return p.PonyfillWritableStream}});var m=st();Object.defineProperty(exports,`TransformStream`,{enumerable:!0,get:function(){return m.PonyfillTransformStream}});var h=ct();Object.defineProperty(exports,`CompressionStream`,{enumerable:!0,get:function(){return h.PonyfillCompressionStream}});var g=lt();Object.defineProperty(exports,`DecompressionStream`,{enumerable:!0,get:function(){return g.PonyfillDecompressionStream}});var _=Je();Object.defineProperty(exports,`IteratorObject`,{enumerable:!0,get:function(){return _.PonyfillIteratorObject}});var v=ut();Object.defineProperty(exports,`TextDecoderStream`,{enumerable:!0,get:function(){return v.PonyfillTextDecoderStream}}),Object.defineProperty(exports,`TextEncoderStream`,{enumerable:!0,get:function(){return v.PonyfillTextEncoderStream}})})),ft=c(((exports,t)=>{let n=F(),r;t.exports=function(e={}){let t={};if(t.URLPattern=globalThis.URLPattern,!t.URLPattern){let e=L();t.URLPattern=e.URLPattern}if(e.skipPonyfill||n())return{fetch:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response,FormData:globalThis.FormData,ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,CompressionStream:globalThis.CompressionStream,DecompressionStream:globalThis.DecompressionStream,TextDecoderStream:globalThis.TextDecoderStream,TextEncoderStream:globalThis.TextEncoderStream,Blob:globalThis.Blob,File:globalThis.File,crypto:globalThis.crypto,btoa:globalThis.btoa,TextEncoder:globalThis.TextEncoder,TextDecoder:globalThis.TextDecoder,URLPattern:t.URLPattern,URL:globalThis.URL,URLSearchParams:globalThis.URLSearchParams};if(r||=dt(),t.fetch=r.fetch,t.Request=r.Request,t.Response=r.Response,t.Headers=r.Headers,t.FormData=r.FormData,t.ReadableStream=r.ReadableStream,t.URL=r.URL,t.URLSearchParams=r.URLSearchParams,t.WritableStream=r.WritableStream,t.TransformStream=r.TransformStream,t.CompressionStream=r.CompressionStream,t.DecompressionStream=r.DecompressionStream,t.TextDecoderStream=r.TextDecoderStream,t.TextEncoderStream=r.TextEncoderStream,t.Blob=r.Blob,t.File=r.File,t.crypto=globalThis.crypto,t.btoa=r.btoa,t.TextEncoder=r.TextEncoder,t.TextDecoder=r.TextDecoder,e.formDataLimits&&(t.Body=class extends r.Body{constructor(t,n){super(t,{formDataLimits:e.formDataLimits,...n})}},t.Request=class extends r.Request{constructor(t,n){super(t,{formDataLimits:e.formDataLimits,...n})}},t.Response=class extends r.Response{constructor(t,n){super(t,{formDataLimits:e.formDataLimits,...n})}}),!t.crypto){let e=p(`crypto`);t.crypto=e.webcrypto}return t}})),pt=c(((exports,t)=>{let n=ft(),r=F(),i=n();if(!r())try{globalThis.libcurl=globalThis.libcurl||p(`node-libcurl`)}catch{}t.exports.fetch=i.fetch,t.exports.Headers=i.Headers,t.exports.Request=i.Request,t.exports.Response=i.Response,t.exports.FormData=i.FormData,t.exports.ReadableStream=i.ReadableStream,t.exports.WritableStream=i.WritableStream,t.exports.TransformStream=i.TransformStream,t.exports.CompressionStream=i.CompressionStream,t.exports.DecompressionStream=i.DecompressionStream,t.exports.TextDecoderStream=i.TextDecoderStream,t.exports.TextEncoderStream=i.TextEncoderStream,t.exports.Blob=i.Blob,t.exports.File=i.File,t.exports.crypto=i.crypto,t.exports.btoa=i.btoa,t.exports.TextEncoder=i.TextEncoder,t.exports.TextDecoder=i.TextDecoder,t.exports.URLPattern=i.URLPattern,t.exports.URL=i.URL,t.exports.URLSearchParams=i.URLSearchParams,exports.createFetch=n}));function mt(e){return typeof e==`object`&&!!e&&typeof e[Symbol.asyncIterator]==`function`}function ht(e){if(e.socket?.localPort)return e.socket?.localPort;let t=e.headers?.[`:authority`]||e.headers?.host,n=t?.split(`:`)?.[1];return n||80}function gt(e){if(e.headers?.[`:authority`])return e.headers?.[`:authority`];if(e.headers?.host)return e.headers?.host;let t=ht(e);if(e.hostname)return e.hostname+`:`+t;let n=e.socket?.localAddress;return n&&!n?.includes(`::`)&&!n?.includes(`ffff`)?`${n}:${t}`:`localhost`}function _t(e){let t=gt(e),n=e.protocol||(e.socket?.encrypted?`https`:`http`),r=e.originalUrl||e.url||`/graphql`;return`${n}://${t}${r}`}function vt(e){let t=e[Symbol.toStringTag];return!!(typeof e==`string`||t===`Uint8Array`||t===`Blob`||t===`FormData`||t===`URLSearchParams`||mt(e))}function yt(e,t,n,r){let i=e.raw||e.req||e,a=_t(i);if(e.query){let n=new t.URL(a);for(let t in e.query)n.searchParams.set(t,e.query[t]);a=n.toString()}let o=e.headers;if(e.headers?.[`:method`])for(let t in o={},e.headers)t.startsWith(`:`)||(o[t]=e.headers[t]);let s=r?Bt():new AbortController;if(n?.once){let e=()=>{s.signal.aborted||(Object.defineProperty(i,`aborted`,{value:!0}),s.abort(n.errored??void 0))};n.once(`error`,e),n.once(`close`,e),n.once(`finish`,()=>{n.removeListener(`close`,e)})}if(e.method===`GET`||e.method===`HEAD`)return new t.Request(a,{method:e.method,headers:o,signal:s.signal});let c=e.body;if(c!=null&&Object.keys(c).length>0){if(vt(c))return new t.Request(a,{method:e.method||`GET`,headers:o,body:c,signal:s.signal});let n=new t.Request(a,{method:e.method||`GET`,headers:o,signal:s.signal});return n.headers.get(`content-type`)?.includes(`json`)||n.headers.set(`content-type`,`application/json; charset=utf-8`),new Proxy(n,{get:(e,t,n)=>{switch(t){case`json`:return()=>v(c);case`text`:return()=>v(JSON.stringify(c));default:return globalThis.Bun?Reflect.get(e,t):Reflect.get(e,t,n)}}})}return new t.Request(a,{method:e.method,headers:o,signal:s.signal,body:i,duplex:`half`})}function bt(e){return e.read!=null}function xt(e){return bt(e)}function St(e){return e!=null&&e.setHeader!=null&&e.end!=null&&e.once!=null&&e.write!=null}function Ct(e){return e!=null&&e.getReader!=null}function wt(e){return e!=null&&e.request!=null&&e.respondWith!=null}function Tt(e){e?.socket?.setTimeout?.(0),e?.socket?.setNoDelay?.(!0),e?.socket?.setKeepAlive?.(!0)}function Q(e){e.end(null,null,null)}function Et(e,t){let n=!1,r=()=>{n=!0};e.once(`error`,r),e.once(`close`,r),e.once(`finish`,()=>{e.removeListener(`close`,r),e.removeListener(`error`,r)});let i=t[Symbol.asyncIterator](),a=()=>i.next().then(({done:t,value:r})=>{if(!(n||t))return _(()=>Dt(r,e),()=>n?Q(e):a())});return a()}function Dt(e,t){let n=t.write(e);if(!n)return new Promise(e=>t.once(`drain`,e))}function Ot(e,t,n,r){if(t.closed||t.destroyed||t.writableEnded)return;if(!e){t.statusCode=404,Q(t);return}if(r&&e.headers?.headersInit&&!Array.isArray(e.headers.headersInit)&&!e.headers.headersInit.get&&!e.headers._map&&!e.headers._setCookies?.length)t.writeHead(e.status,e.statusText,e.headers.headersInit);else{if(t.setHeaders)t.setHeaders(e.headers);else{let n=!1;e.headers.forEach((r,i)=>{if(i===`set-cookie`){if(n)return;n=!0;let r=e.headers.getSetCookie?.();if(r){t.setHeader(`set-cookie`,r);return}}t.setHeader(i,r)})}t.writeHead(e.status,e.statusText)}if(e.bodyType===`String`)return _(()=>Dt(e.bodyInit,t),()=>Q(t));let i=e._buffer;if(i)return _(()=>Dt(i,t),()=>Q(t));let a=e.body;if(a==null){Q(t);return}if(a[Symbol.toStringTag]===`Uint8Array`)return _(()=>Dt(a,t),()=>Q(t));if(Tt(n),bt(a)){t.once(`close`,()=>{a.destroy()}),a.pipe(t,{end:!0});return}if(Ct(a))return kt(n,t,a);if(mt(a))return Et(t,a)}function kt(e,t,n){let r=n.getReader();e?.once?.(`error`,e=>{r.cancel(e)});function i(){return r.read().then(({done:e,value:n})=>e?Q(t):_(()=>Dt(n,t),i))}return i()}function At(e){return typeof e==`object`&&!!e&&(`body`in e||`cache`in e||`credentials`in e||`headers`in e||`integrity`in e||`keepalive`in e||`method`in e||`mode`in e||`redirect`in e||`referrer`in e||`referrerPolicy`in e||`signal`in e||`window`in e)}function $(...e){let[t,...n]=e.filter(e=>typeof e==`object`&&!!e);return n.forEach(e=>{let n=Object.getOwnPropertyNames(e).reduce((t,n)=>{let r=Object.getOwnPropertyDescriptor(e,n);return r&&(t[n]=Object.getOwnPropertyDescriptor(e,n)),t},{});Object.getOwnPropertySymbols(e).forEach(t=>{let r=Object.getOwnPropertyDescriptor(e,t);r?.enumerable&&(n[t]=r)}),Object.defineProperties(t,n)}),t}function jt(e,t){return new t(e.stack||e.message||e.toString(),{status:e.status||500})}function Mt(e,t){return e==null?t==null?{}:{waitUntil:t}:$(Object.create(e),{waitUntil:t},e)}function Nt(e,t){if(t?.aborted)throw t.reason;if(h(e)&&t){let n=y();function r(){n.reject(t.reason)}return t.addEventListener(`abort`,r,{once:!0}),e.then(function(e){n.resolve(e)}).catch(function(e){n.reject(e)}).finally(()=>{t.removeEventListener(`abort`,r)}),n.promise}return e}const Pt=[`SIGINT`,`exit`,`SIGTERM`],Ft=new Set;let It=!1;function Lt(){if(!It){It=!0;for(let e of Pt)globalThis.process.once(e,function(){return Promise.allSettled([...Ft].map(e=>!e.disposed&&e.disposeAsync()))})}}function Rt(e){globalThis.process&&(Lt(),Ft.has(e)||(Ft.add(e),e.defer(()=>{Ft.delete(e)})))}var zt=class extends EventTarget{aborted=!1;_onabort=null;_reason;constructor(){super();let e=globalThis.process?.getBuiltinModule?.(`node:events`);e?.kMaxEventTargetListeners&&(this[e.kMaxEventTargetListeners]=0)}throwIfAborted(){if(this._nativeCtrl?.signal?.throwIfAborted)return this._nativeCtrl.signal.throwIfAborted();if(this.aborted)throw this._reason}_nativeCtrl;ensureNativeCtrl(){if(!this._nativeCtrl){let e=this.aborted;this._nativeCtrl=new AbortController,e&&this._nativeCtrl.abort(this._reason)}return this._nativeCtrl}abort(e){if(this._nativeCtrl?.abort)return this._nativeCtrl?.abort(e);this._reason=e||new DOMException(`This operation was aborted`,`AbortError`),this.aborted=!0,this.dispatchEvent(new Event(`abort`))}get signal(){return this._nativeCtrl?.signal?this._nativeCtrl.signal:this}get reason(){return this._nativeCtrl?.signal?this._nativeCtrl.signal.reason:this._reason}get onabort(){return this._onabort,this._onabort}set onabort(e){if(this._nativeCtrl?.signal){this._nativeCtrl.signal.onabort=e;return}this._onabort&&this.removeEventListener(`abort`,this._onabort),this._onabort=e,e&&this.addEventListener(`abort`,e)}};function Bt(){return globalThis.Bun||globalThis.Deno?new AbortController:new Proxy(new zt,{get(e,t,n){if(t.toString().includes(`kDependantSignals`)){let n=e.ensureNativeCtrl();return Reflect.get(n.signal,t,n.signal)}return Reflect.get(e,t,n)},set(e,t,n,r){if(t.toString().includes(`kDependantSignals`)){let r=e.ensureNativeCtrl();return Reflect.set(r.signal,t,n,r.signal)}return Reflect.set(e,t,n,r)},getPrototypeOf(){return AbortSignal.prototype}})}function Vt(e){return!!e.onData}function Ht({req:e,res:t,fetchAPI:n,controller:r}){let i=e.getMethod(),a,o=[],s=[e=>{o.push(e)}],c=e=>{for(let t of s)t(e)},l=!1,u=[()=>{l=!0}],d=()=>{for(let e of u)e()};t.onData(function(e,t){c(Buffer.from(Buffer.from(e,0,e.byteLength))),t&&d()});let f;if(i!==`get`&&i!==`head`){a=`half`,r.signal.addEventListener(`abort`,()=>{d()},{once:!0});let e;f=()=>(e||=new n.ReadableStream({start(e){for(let t of o)e.enqueue(t);if(l){e.close();return}s.push(t=>{e.enqueue(t)}),u.push(()=>{if(r.signal.reason){e.error(r.signal.reason);return}e.desiredSize&&e.close()})}}),e)}let p=new n.Headers;e.forEach((e,t)=>{p.append(e,t)});let m=`http://localhost${e.getUrl()}`,h=e.getQuery();h&&(m+=`?${h}`);let g;function _(){return f?l?b():f():null}let y=new n.Request(m,{method:i,headers:p,get body(){return _()},signal:r.signal,duplex:a});function b(){return g||=o.length===1?o[0]:Buffer.concat(o),g}function x(){return l?v(b()):new Promise((e,t)=>{try{u.push(()=>{e(b())})}catch(e){t(e)}})}return Object.defineProperties(y,{body:{get(){return _()},configurable:!0,enumerable:!0},json:{value(){return x().then(e=>e.toString(`utf8`)).then(e=>JSON.parse(e))},configurable:!0,enumerable:!0},text:{value(){return x().then(e=>e.toString(`utf8`))},configurable:!0,enumerable:!0},arrayBuffer:{value(){return x()},configurable:!0,enumerable:!0}}),y}function Ut(e,t){return new t.WritableStream({write(t){e.cork(()=>{e.write(t)})},close(){e.cork(()=>{e.end()})}})}function Wt(e,t,n,r){if(!t){e.writeStatus(`404 Not Found`),e.end();return}let i=t._buffer,a=t.bodyType===`String`?t.bodyInit:void 0;if(!n.signal.aborted&&(e.cork(()=>{e.writeStatus(`${t.status} ${t.statusText}`);for(let[n,r]of t.headers)if(n!==`content-length`){if(n===`set-cookie`){let r=t.headers.getSetCookie?.();if(r){for(let t of r)e.writeHeader(n,t);continue}}e.writeHeader(n,r)}a?e.end(a):i?e.end(i):t.body||e.end()}),!(a||i||!t.body)))return n.signal.addEventListener(`abort`,()=>{t.body?.locked||t.body?.cancel(n.signal.reason)},{once:!0}),t.body.pipeTo(Ut(e,r),{signal:n.signal}).catch(e=>{if(!n.signal.aborted)throw e})}var Gt=d(pt(),1);function Kt(e){try{return!!e?.request}catch{return!1}}const qt={};function Jt(e,t){let n=t?.__useSingleWriteHead==null?!0:t.__useSingleWriteHead,r={...Gt,...t?.fetchAPI},i=t?.__useCustomAbortCtrl==null?r.Request!==globalThis.Request:t.__useCustomAbortCtrl,a=typeof e==`function`?e:e.handle,o=[],s=[],c,l=new Set,u;function d(){return u||(u=new P,t?.disposeOnProcessTerminate&&Rt(u),u.defer(()=>{if(l.size>0)return Promise.allSettled(l).then(()=>{l.clear()},()=>{l.clear()})})),u}function f(e){h(e)&&(d(),l.add(e),e.then(()=>{l.delete(e)},t=>{console.error(`Unexpected error while waiting: ${t.message||t}`),l.delete(e)}))}if(t?.plugins!=null)for(let e of t.plugins){e.instrumentation&&(c=c?E(c,e.instrumentation):e.instrumentation),e.onRequest&&o.push(e.onRequest),e.onResponse&&s.push(e.onResponse);let t=e[k.dispose];t&&d().defer(t);let n=e[k.asyncDispose];n&&d().defer(n),e.onDispose&&d().defer(e.onDispose)}let p=o.length>0||s.length>0?function(e,t){let n=a,i;if(o.length===0)return u();let c=e.parsedUrl||new Proxy(qt,{get(t,n,i){return c=new r.URL(e.url,`http://localhost`),Reflect.get(c,n,c)}});function l(n){return s.length===0?n:_(()=>b(s,i=>i({request:e,response:n,serverContext:t,setResponse(e){n=e},fetchAPI:r})),()=>n)}function u(){return i?l(i):_(()=>n(e,t),l)}return _(()=>b(o,(a,o)=>a({request:e,setRequest(t){e=t},serverContext:t,fetchAPI:r,url:c,requestHandler:n,setRequestHandler(e){n=e},endResponse(e){i=e,e&&o()}})),u)}:a;if(c?.request){let e=p;p=(t,n)=>D({request:t}).asyncFn(c.request,e)(t,n)}function m(e,...t){let n=t.length>1?$(...t):t[0]||{};n.waitUntil||=f;let a=yt(e,r,void 0,i);return p(a,n)}function g(e,t,...n){let a=t.raw||t,o=n.length>1?$(...n):n[0]||{};o.waitUntil||=f;let s=yt(e,r,a,i);return p(s,o)}function y(e,t,...i){let a={req:e,res:t,waitUntil:f};return T(v().then(()=>g(e,t,a,...i)).catch(e=>jt(e,r.Response)).then(r=>Ot(r,t,e,n)).catch(e=>console.error(`Unexpected error while handling request: ${e.message||e}`)))}function x(e,t,...n){let a={res:e,req:t,waitUntil:f},o=n.filter(e=>e!=null),s=o.length>0?$(a,...n):a,c=i?Bt():new AbortController,l=e.end.bind(e),u=!1;e.end=function(e){return u=!0,l(e)};let d=e.onAborted.bind(e);d(function(){c.abort()}),e.onAborted=function(e){c.signal.addEventListener(`abort`,e,{once:!0})};let m=Ht({req:t,res:e,fetchAPI:r,controller:c});return _(()=>_(()=>p(m,s),e=>e,e=>jt(e,r.Response)),t=>{if(!c.signal.aborted&&!u)return _(()=>Wt(e,t,c,r),e=>e,e=>{console.error(`Unexpected error while handling request: ${e.message||e}`)})})}function S(e,...t){if(!e.respondWith||!e.request)throw TypeError(`Expected FetchEvent, got ${e}`);let n=t.filter(e=>e!=null),r=n.length>0?$({},e,...n):Mt(e),i=p(e.request,r);e.respondWith(i)}function C(e,...t){let n=t.filter(e=>e!=null),r=n.length>1?$({},...n):Mt(n[0],n[0]==null||n[0].waitUntil==null?f:void 0);return p(e,r)}let w=(e,...t)=>{if(typeof e==`string`||`href`in e){let[n,...i]=t;if(At(n)){let t=new r.Request(e,n),a=C(t,...i),o=n.signal;return o?Nt(a,o):a}let a=new r.Request(e);return C(a,...t)}let n=C(e,...t);return Nt(n,e.signal)},O=(e,...t)=>{let[n,...r]=t;if(xt(e)){if(!St(n))throw TypeError(`Expected ServerResponse, got ${n}`);return y(e,n,...r)}if(Vt(e))return x(e,n,...r);if(St(n))throw TypeError(`Got Node response without Node request`);return Kt(e)?wt(e)?S(e,...t):C(e.request,e,...t):w(e,...t)},A={handleRequest:C,fetch:w,handleNodeRequest:m,handleNodeRequestAndResponse:g,requestListener:y,handleEvent:S,handleUWS:x,handle:O,get disposableStack(){return d()},[k.asyncDispose](){return u&&!u.disposed?u.disposeAsync():v()},dispose(){return u&&!u.disposed?u.disposeAsync():v()},waitUntil:f},j=new Proxy(O,{has:(t,n)=>n in A||n in O||e&&n in e,get:(t,n)=>{if(globalThis.Deno||n===Symbol.asyncDispose||n===Symbol.dispose){let e=Reflect.get(A,n,A);if(e)return e}let r=A[n];if(r)return r.bind?r.bind(A):r;let i=O[n];if(i)return i.bind?i.bind(O):i;if(e){let t=e[n];if(t)return t.bind?function(...t){let r=e[n](...t);return r===e?j:r}:t}},apply(e,t,n){return O(...n)}});return j}function Yt(e){let t=p(e);if(typeof t!=`object`)throw Error(`The module at ${e} must export an object.`);let n=t.default;if(typeof n!=`object`)throw Error(`The module at ${e} must export an object.`);if(!n.version)throw Error(`The module at ${e} must export a "version" property.`);if(!n.metadata)throw Error(`The module at ${e} must export a "metadata" property.`);if(!n.metadata.displayName)throw Error(`The module at ${e} must export a "displayName" property in the "metadata" object.`);if(typeof n.fetch!=`function`)throw Error(`The module at ${e} must export a "fetch" function.`);return n}function Xt(e){return Jt(e.fetch)}export{p as __require,Xt as createHTTPHandler,Yt as requireAsCommonJS};